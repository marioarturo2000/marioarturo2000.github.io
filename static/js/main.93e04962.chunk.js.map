{"version":3,"sources":["components/Appointments.js","components/AppointmentInputComponent.js","components/Utils.js","components/AppointmentsPanel.js","components/Asistentes.js","components/AsistenteInputComponent.js","components/AppointmentsCalendar.js","components/AsistentesPanel.js","components/Ejecutivos.js","components/EjecutivoInputComponent.js","components/EjecutivosPanel.js","components/Repository.js","components/App.js","index.js"],"names":["Appointments","props","getColumns","columns","push","key","title","dataKey","width","cellRenderer","cellData","rowData","appointments","filter","appointment","asistentes","find","asistente","id","asistenteId","Typography","noWrap","variant","length","headerRenderer","frozen","Column","FrozenDirection","LEFT","i","ejecutivo","ejecutivos","name","columnIndex","appointmentId","IconButton","edge","size","onClick","handleClickEditAppointment","Event","handleClickAddAppointment","Add","column","style","getData","data","row","asistenteName","j","getAppointment","ejecutivoId","onAddAppointment","onEditAppointment","clearActiveCells","Array","from","document","querySelectorAll","forEach","element","classList","remove","handleMouseOver","event","getHeaderCells","currentTarget","add","handleAsistenteMouseOver","colHeaders","colHeader","dataset","cgi","latamTopArtistOrFreelanceTalent","latamTopArtistsAndFreelanceTalent","newIPs","newIdeas","newIdes","stopMotion","targetPreschool","targetKids","targetPrime","targetAdult","topStudio","topStudios","twoD","threeD","videogames","handleEjecutivoMouseOver","rowHeaders","rowHeader","renderCell","rowIndex","result","className","align","padding","data-ejecutivo","onMouseOver","cursor","data-asistente","state","cell","cellEjecutivoId","this","getEjecutivoHeaderCells","prototype","apply","cellAsistenteId","getAsistenteHeaderCells","height","fixed","headerHeight","React","Component","AppointmentInputComponent","getAsistenteAppointments","getEjecutivoAppointments","handleCancel","setState","open","onClose","handleDelete","onDelete","handleCheckedChange","target","checked","handleFormSubmit","preventDefault","onSubmit","datetime","duration","handleValueChange","handleMultipleValueChange","value","datetimeOptions","ejecutivoAppointments","getDatetimeOptionsForEjecutivo","getDatetimeOptions","datetimeOption","times","time","makeSelectItems","items","ListSubheader","disableSticky","date","datetimeOptionTime","MenuItem","moment","locale","stateFromProps","asistenteAppointments","isAvailable","isDatetimeBlockedByAppointments","availability","isDatetimeAvailableForEjecutivo","asistentesOptions","ejecutivosOptions","openAlert","Dialog","disableBackdropClick","fullWidth","maxWidth","DialogTitle","DialogContent","Autocomplete","multiple","onChange","_event","options","getOptionLabel","option","filterSelectedOptions","required","renderInput","params","TextField","label","margin","renderTags","getTagProps","map","index","Chip","getAsistenteOptionStyle","icon","isJury","Gavel","getEjecutivoOptionStyle","type","inputProps","min","step","InputLabelProps","shrink","FormControl","InputLabel","Select","renderValue","format","Collapse","in","Alert","severity","DialogActions","Button","color","firstDay","tz","day","clone","hour","slot","availabilityDatetime","dates","includes","sort","datetimeMoment","currentAppointmentId","adjustedDatetimeMoment","appointmentDatetime","isSame","getIdeatoonProjects","ideatoonProjects","Set","flatMap","a","b","nameA","toUpperCase","nameB","sortAlphabetically","getJurados","jurados","sortAlphabeticallyByName","sortAlphabeticallyByDatetime","isBefore","AppointmentsPanel","inputAppointmentComponentIsOpened","inputAsistente","inputEjecutivo","inputAppointment","handleClickExport","currentDate","currentTime","text","currentDatetime","join","copy","snackbarOpen","textArea","createElement","top","left","position","body","appendChild","focus","select","msg","execCommand","console","log","err","error","removeChild","handleDeleteAppointment","onDeleteAppointment","handleInputAppointmentClose","handleSelectAsistente","selectedAsistente","handleSelectEjecutivo","selectedEjecutivo","handleSnackbarClose","handleSubmitAppointment","onSubmitAppointment","Box","Snackbar","autoHideDuration","message","Grid","container","spacing","item","xs","xd","display","justifyContent","alignItems","Asistentes","handleItemDelete","handleItemEdit","onEdit","handleItemSelect","onSelect","refs","list","forceUpdate","handleSendSchedule","onSendSchedule","renderRow","isSelected","studio","timezone","nextProps","nextState","ref","itemSize","itemCount","Asistente","handleItemClick","anchorEl","handleMenuOpen","handleMenuClose","ListItem","button","dense","selected","ContainerProps","ContainerComponent","ListItemAvatar","Avatar","EmojiEvents","ListItemText","primary","primaryTypographyProps","secondary","Fragment","ListItemSecondaryAction","MoreVert","Menu","keepMounted","Boolean","AsistenteInputComponent","trim","ideatoonProjectOptions","autoFocus","selectOnFocus","clearOnBlur","handleHomeEndKeys","freeSolo","FormControlLabel","control","Checkbox","component","FormLabel","FormGroup","AppointmentsCalendar","clearAppointmentCells","removeAttribute","clearAvailableCells","handleClick","adjacentCells","getAdjacentCells","contains","getInputAvailability","onSubmitAvailability","rows","totalMinutes","displayTime","minute","cells","prevProps","displayAvailability","displayEjecutivoAppointments","displayAsistenteAppointments","calendarCells","calendarCell","setAttribute","cellMoment","elementMoment","elementDate","elementHour","elementMinute","cellDate","cellHour","Table","TableHead","TableRow","TableCell","data-date","TableBody","onMouseLeave","rowSpan","scope","data-hour","data-datetime","AsistentesPanel","handleClickAddAsistente","inputAsistenteComponentIsOpened","handleDeleteAsistente","onDeleteAsistente","handleEditAsistente","handleInputAsistenteClose","filteredAppointments","appointmentAsistente","localTimezone","cols","modalBody","handleSubmitAsistente","onSubmitAsistente","Modal","sm","md","Card","CardHeader","action","edget","CardContent","Ejecutivos","description","positionAtStudio","Ejecutivo","alt","PureComponent","EjecutivoInputComponent","EjecutivosPanel","handleClickAddEjecutivo","inputEjecutivoComponentIsOpened","handleClickImport","csvContent","headerRow","csvRow","latamRisingStudios","encodedUri","encodeURI","window","handleDeleteEjecutivo","onDeleteEjecutivo","handleEditEjecutivo","handleInputEjecutivoClose","appointmentEjecutivo","handleSubmitAvailability","handleSubmitEjecutivo","onSubmitEjecutivo","ButtonGroup","getOpenDb","openDB","upgrade","db","objectStoreNames","createObjectStore","keyPath","delete","getAll","put","TabPanel","children","other","role","hidden","App","deleteAppointment","then","deleteAsistente","deleteEjecutivo","newAsistente","uuid","storeAsistente","storeAvailability","newAppointment","storeAppointment","newEjecutivo","storeEjecutivo","handleTabChange","newValue","tabValue","promises","getAppointments","getAsistentes","getAvailability","getEjecutivos","Promise","all","values","ejecutivoAvailability","AppBar","Toolbar","Container","disableGutters","Paper","marginBottom","Tabs","indicatorColor","textColor","centered","Tab","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.93e04962.chunk.js","sourcesContent":["import React from 'react';\r\nimport { IconButton, Typography } from '@material-ui/core';\r\nimport BaseTable, { AutoResizer, Column } from 'react-base-table'\r\nimport 'react-base-table/styles.css'\r\nimport { Add, Event } from '@material-ui/icons'\r\n\r\nclass Appointments extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcolumns: [],\r\n\t\t\tdata: []\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumns = () => {\r\n\t\tconst columns = [];\r\n\t\tcolumns.push({\r\n\t\t\tkey: 'asistente',\r\n\t\t\ttitle: 'Asistente',\r\n\t\t\tdataKey: 'asistenteName',\r\n\t\t\twidth: 150,\r\n\t\t\tcellRenderer: ({ cellData, rowData }) => {\r\n\t\t\t\tconst appointments = this.props.appointments.filter(appointment => appointment.asistentes.find(asistente => asistente.id === rowData.asistenteId));\t\t\t\t\r\n\t\t\t\treturn (<Typography noWrap variant=\"body2\">{`(${appointments.length}) ${cellData}`}</Typography>);\r\n\t\t\t},\r\n\t\t\theaderRenderer: () => {\r\n\t\t\t\treturn (<div></div>);\r\n\t\t\t},\r\n\t\t\tfrozen: Column.FrozenDirection.LEFT\r\n\t\t});\r\n\t\tfor (let i = 0; i < this.props.ejecutivos.length; i++) {\r\n\t\t\tconst ejecutivo = this.props.ejecutivos[i];\r\n\t\t\tcolumns.push({\r\n\t\t\t\tkey: `ejecutivo${i}`,\r\n\t\t\t\ttitle: ejecutivo.name,\r\n\t\t\t\tdataKey: i,\r\n\t\t\t\twidth: 45,\r\n\t\t\t\tcellRenderer: ({ columnIndex, rowData }) => {\r\n\t\t\t\t\tconst rowDataIndex = columnIndex - 1;\r\n\t\t\t\t\tconst appointmentId = rowData[rowDataIndex];\r\n\t\t\t\t\tif (appointmentId) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<IconButton edge=\"end\" size=\"small\" onClick={() => this.handleClickEditAppointment(appointmentId)}>\r\n\t\t\t\t\t\t\t\t<Event />\r\n\t\t\t\t\t\t\t</IconButton>);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<IconButton edge=\"end\" size=\"small\" onClick={() => this.handleClickAddAppointment(rowData.asistenteId, ejecutivo.id)}>\r\n\t\t\t\t\t\t\t\t<Add />\r\n\t\t\t\t\t\t\t</IconButton>)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\theaderRenderer: ({ column }) => {\r\n\t\t\t\t\treturn (<Typography noWrap variant=\"body2\" style={{ \"display\": \"inline-flex\", \"align-items\": \"center\", \"height\": \"130px\", \"width\":\"100%\", \"writing-mode\": \"vertical-rl\", \"transform\": \"rotate(180deg)\" }}>{column.title}</Typography>);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn columns;\r\n\t}\r\n\r\n\tgetData = () => {\r\n\t\tconst data = [];\r\n\t\tfor (let i = 0; i < this.props.asistentes.length; i++) {\r\n\t\t\tconst asistente = this.props.asistentes[i];\r\n\t\t\tconst row = { asistenteId: asistente.id, asistenteName: asistente.name };\r\n\t\t\tfor (let j = 0; j < this.props.ejecutivos.length; j++) {\r\n\t\t\t\tconst ejecutivo = this.props.ejecutivos[j];\r\n\t\t\t\tconst appointment = this.getAppointment(asistente, ejecutivo);\r\n\t\t\t\trow[j] = appointment?.id;\r\n\t\t\t}\r\n\t\t\tdata.push(row);\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n\r\n\thandleClickAddAppointment = (asistenteId, ejecutivoId) => {\r\n\t\tthis.props.onAddAppointment(asistenteId, ejecutivoId);\r\n\t}\r\n\r\n\thandleClickEditAppointment = (id) => {\r\n\t\tthis.props.onEditAppointment(id);\r\n\t}\r\n\r\n\tgetAppointment = (asistente, ejecutivo) => {\r\n\t\tconst asistenteId = asistente.id;\r\n\t\tconst ejecutivoId = ejecutivo.id;\r\n\t\treturn this.props.appointments.find(appointment =>\r\n\t\t\tappointment.asistentes.find(asistente => asistente.id === asistenteId) &&\r\n\t\t\tappointment.ejecutivos.find(ejecutivo => ejecutivo.id === ejecutivoId));\r\n\t}\r\n\r\n\tclearActiveCells = () => {\r\n\t\tconst appointmentHeaderCells = Array.from(document.querySelectorAll('.appointment-cell.active'));\r\n\t\tappointmentHeaderCells.forEach(element => element.classList.remove('active'));\r\n\t}\r\n\r\n\tgetHeaderCells(cell) {\r\n\t\tconst result = [];\r\n\t\tconst cellEjecutivoId = cell.dataset.ejecutivo;\r\n\t\tconst colHeaders = this.getEjecutivoHeaderCells(cellEjecutivoId);\r\n\t\tArray.prototype.push.apply(result, colHeaders);\r\n\t\tconst cellAsistenteId = cell.dataset.asistente;\r\n\t\tconst rowHeaders = this.getAsistenteHeaderCells(cellAsistenteId);\r\n\t\tArray.prototype.push.apply(result, rowHeaders);\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetAsistenteHeaderCells(id) {\r\n\t\tconst result = [];\r\n\t\tconst rowHeaders = Array.from(document.querySelectorAll('tbody > tr > th.appointment-cell'));\r\n\t\tconst rowHeader = rowHeaders.find(element => element.dataset.asistente === id);\r\n\t\tif (rowHeader) {\r\n\t\t\tresult.push(rowHeader);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetEjecutivoHeaderCells(id) {\r\n\t\tconst result = [];\r\n\t\tconst colHeaders = Array.from(document.querySelectorAll('thead > tr > th.appointment-cell'));\r\n\t\tconst colHeader = colHeaders.find(element => element.dataset.ejecutivo === id);\r\n\t\tif (colHeader) {\r\n\t\t\tresult.push(colHeader);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\thandleMouseOver = (event) => {\r\n\t\tthis.clearActiveCells();\r\n\t\tconst headerCells = this.getHeaderCells(event.currentTarget);\r\n\t\theaderCells.forEach(element => element.classList.add('active'));\r\n\t}\r\n\r\n\thandleAsistenteMouseOver = asistente => {\r\n\t\tthis.clearActiveCells();\r\n\t\tconst colHeaders = Array.from(document.querySelectorAll('thead > tr > th.appointment-cell'));\r\n\t\tfor (const colHeader of colHeaders) {\r\n\t\t\tconst ejecutivo = this.props.ejecutivos.find(ejecutivo => ejecutivo.id === colHeader.dataset.ejecutivo);\r\n\t\t\tif ((asistente.cgi === true && ejecutivo.cgi === true) ||\r\n\t\t\t\t(asistente.latamTopArtistOrFreelanceTalent === true && ejecutivo.latamTopArtistsAndFreelanceTalent === true) ||\r\n\t\t\t\t(asistente.newIPs === true && ejecutivo.newIPs === true) ||\r\n\t\t\t\t(asistente.newIdeas === true && ejecutivo.newIdes === true) ||\r\n\t\t\t\t(asistente.stopMotion === true && ejecutivo.stopMotion === true) ||\r\n\t\t\t\t(asistente.targetPreschool === true && ejecutivo.targetPreschool === true) ||\r\n\t\t\t\t(asistente.targetKids === true && ejecutivo.targetKids === true) ||\r\n\t\t\t\t(asistente.targetPrime === true && ejecutivo.targetPrime === true) ||\r\n\t\t\t\t(asistente.targetAdult === true && ejecutivo.targetAdult === true) ||\r\n\t\t\t\t(asistente.topStudio === true && ejecutivo.topStudios === true) ||\t\r\n\t\t\t\t(asistente.twoD === true && ejecutivo.twoD === true) ||\r\n\t\t\t\t(asistente.threeD === true && ejecutivo.threeD === true) ||\r\n\t\t\t\t(asistente.videogames === true && ejecutivo.videogames === true)) {\r\n\t\t\t\tcolHeader.classList.add('active');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleEjecutivoMouseOver = ejecutivo => {\r\n\t\tthis.clearActiveCells();\r\n\t\tconst rowHeaders = Array.from(document.querySelectorAll('tbody > tr > th.appointment-cell'));\r\n\t\tfor (const rowHeader of rowHeaders) {\r\n\t\t\tconst asistente = this.props.asistentes.find(asistente => asistente.id === rowHeader.dataset.asistente);\r\n\t\t\tif ((asistente.cgi === true && ejecutivo.cgi === true) ||\r\n\t\t\t\t(asistente.latamTopArtistOrFreelanceTalent === true && ejecutivo.latamTopArtistsAndFreelanceTalent === true) ||\r\n\t\t\t\t(asistente.newIPs === true && ejecutivo.newIPs === true) ||\r\n\t\t\t\t(asistente.newIdeas === true && ejecutivo.newIdes === true) ||\r\n\t\t\t\t(asistente.stopMotion === true && ejecutivo.stopMotion === true) ||\r\n\t\t\t\t(asistente.targetPreschool === true && ejecutivo.targetPreschool === true) ||\r\n\t\t\t\t(asistente.targetKids === true && ejecutivo.targetKids === true) ||\r\n\t\t\t\t(asistente.targetPrime === true && ejecutivo.targetPrime === true) ||\r\n\t\t\t\t(asistente.targetAdult === true && ejecutivo.targetAdult === true) ||\r\n\t\t\t\t(asistente.topStudio === true && ejecutivo.topStudios === true) ||\r\n\t\t\t\t(asistente.twoD === true && ejecutivo.twoD === true) ||\r\n\t\t\t\t(asistente.threeD === true && ejecutivo.threeD === true) ||\r\n\t\t\t\t(asistente.videogames === true && ejecutivo.videogames === true)) {\r\n\t\t\t\trowHeader.classList.add('active');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trenderCell = (props) => {\r\n\t\tconst { columnIndex, rowIndex, style } = props;\r\n\t\tvar result = null;\r\n\t\tif (columnIndex > 0 && rowIndex === 0) {\r\n\t\t\tconst ejecutivo = this.props.ejecutivos[columnIndex - 1];\r\n\t\t\tif (ejecutivo) {\r\n\t\t\t\tresult = (<div\r\n\t\t\t\t\tclassName=\"appointment-cell\"\r\n\t\t\t\t\talign='center'\r\n\t\t\t\t\tstyle={style}\r\n\t\t\t\t\tpadding='6px'\r\n\t\t\t\t\tdata-ejecutivo={ejecutivo.id}\r\n\t\t\t\t\tonMouseOver={() => this.handleEjecutivoMouseOver(ejecutivo)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span style={{ \"writing-mode\": \"vertical-rl\", \"transform\": \"rotate(180deg)\" }}>\r\n\t\t\t\t\t\t{ejecutivo.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>);\r\n\t\t\t}\r\n\t\t} else if (columnIndex == 0 && rowIndex > 0) {\r\n\t\t\tconst asistente = this.props.asistentes[rowIndex - 1];\r\n\t\t\tif (asistente) {\r\n\t\t\t\tresult = (<div\r\n\t\t\t\t\tclassName=\"appointment-cell\"\r\n\t\t\t\t\tstyle={style}\r\n\t\t\t\t\tcursor='alias'\r\n\t\t\t\t\tdata-asistente={asistente.id}\r\n\t\t\t\t\tonMouseOver={() => this.handleAsistenteMouseOver(asistente)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{asistente.name}\r\n\t\t\t\t</div>);\r\n\t\t\t}\r\n\t\t} else if (columnIndex > 0 && rowIndex > 0) {\r\n\t\t\tconst asistente = this.props.asistentes[rowIndex - 1];\r\n\t\t\tconst ejecutivo = this.props.ejecutivos[columnIndex - 1];\r\n\t\t\tif (asistente && ejecutivo) {\r\n\t\t\t\tresult = (<div\r\n\t\t\t\t\tstyle={style}>\r\n\t\t\t\t\t<IconButton edge=\"end\" size=\"small\" onClick={() => this.handleClickEditAppointment(asistente, ejecutivo)}>\r\n\t\t\t\t\t\t<Event />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst columns = this.getColumns();\r\n\t\tconst data = this.getData();\r\n\t\treturn (\r\n\t\t\t<AutoResizer>\r\n        {({ width, height }) => (\r\n\t\t\t\t\t<BaseTable\r\n\t\t\t\t\t\tfixed\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdata={data}\r\n\t\t\t\t\t\theight={height}\r\n\t\t\t\t\t\theaderHeight={150}\r\n\t\t\t\t\t\twidth={width}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n      </AutoResizer>)\r\n\t}\r\n}\r\n\r\nexport default Appointments;","import React from 'react';\r\nimport { Button, Chip, Collapse, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, InputLabel, TextField, MenuItem, ListSubheader, Select } from '@material-ui/core';\r\nimport { Gavel } from '@material-ui/icons'\r\nimport { Alert, Autocomplete } from '@material-ui/lab';\r\nimport moment from 'moment-timezone';\r\nimport 'moment/locale/es';\r\n\r\nclass AppointmentInputComponent extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tmoment.locale('es');\r\n\t\tthis.state = AppointmentInputComponent.stateFromProps(props);\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n\t\tif (props.open === true && state.open === false) {\r\n\t\t\treturn AppointmentInputComponent.stateFromProps(props);\r\n\t\t} else {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stateFromProps = function (props) {\r\n\t\tconst appointment = props.appointment;\r\n\t\tif (appointment) {\r\n\t\t\tlet datetimeOptions = null;\r\n\t\t\tif (appointment.ejecutivos.length > 0) {\r\n\t\t\t\tconst ejecutivoAppointments = props.appointments.filter(appointment => appointment.ejecutivos.find(ejecutivo => ejecutivo.id === appointment.ejecutivos[0].id));\r\n\t\t\t\tdatetimeOptions = AppointmentInputComponent.getDatetimeOptionsForEjecutivo(appointment.ejecutivos[0], appointment.duration, ejecutivoAppointments)\r\n\t\t\t} else {\r\n\t\t\t\tdatetimeOptions = AppointmentInputComponent.getDatetimeOptions();\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\topen: props.open,\r\n\t\t\t\topenAlert: false,\r\n\t\t\t\tid: appointment.id,\r\n\t\t\t\tappointments: props.appointments,\r\n\t\t\t\tasistentes: appointment.asistentes,\r\n\t\t\t\tasistentesOptions: props.asistentes || appointment.asistentes,\r\n\t\t\t\tdatetime: appointment.datetime,\r\n\t\t\t\tdatetimeOptions: datetimeOptions,\r\n\t\t\t\tduration: appointment.duration,\r\n\t\t\t\tejecutivos: appointment.ejecutivos,\r\n\t\t\t\tejecutivosOptions: props.ejecutivos || appointment.ejecutivos\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tlet asistentes = [];\r\n\t\t\tif (props.asistente) {\r\n\t\t\t\tasistentes.push(props.asistente);\r\n\t\t\t}\r\n\t\t\tlet ejecutivos = [];\r\n\t\t\tif (props.ejecutivo) {\r\n\t\t\t\tejecutivos.push(props.ejecutivo);\r\n\t\t\t}\r\n\t\t\tlet ejecutivoAppointments = [];\r\n\t\t\tif (props.appointments && ejecutivos.length > 0) {\r\n\t\t\t\tejecutivoAppointments = props.appointments.filter(appointment => appointment.ejecutivos.find(ejecutivo => ejecutivo.id === ejecutivos[0].id));\r\n\t\t\t}\r\n\t\t\tconst datetimeOptions =\r\n\t\t\t\tejecutivos.length > 0\r\n\t\t\t\t\t? AppointmentInputComponent.getDatetimeOptionsForEjecutivo(ejecutivos[0], 30, ejecutivoAppointments)\r\n\t\t\t\t\t: AppointmentInputComponent.getDatetimeOptions();\r\n\t\t\treturn {\r\n\t\t\t\topen: props.open,\r\n\t\t\t\topenAlert: false,\r\n\t\t\t\tid: null,\r\n\t\t\t\tappointments: props.appointments,\r\n\t\t\t\tasistentes: asistentes,\r\n\t\t\t\tasistentesOptions: props.asistentes,\r\n\t\t\t\tdatetime: datetimeOptions.length > 0 && datetimeOptions[0].times.length > 0 ? datetimeOptions[0].times[0].value : null,\r\n\t\t\t\tdatetimeOptions: datetimeOptions,\r\n\t\t\t\tduration: 20,\r\n\t\t\t\tejecutivos: ejecutivos,\r\n\t\t\t\tejecutivosOptions: props.ejecutivos\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDatetimeOptions = function () {\r\n\t\tlet datetimeOptions = [];\r\n\t\tconst timezone = 'America/Mexico_City';\r\n\t\tconst firstDay = moment.tz('2022-09-05', timezone);\r\n\t\tfor (let day = 0; day < 6; day++) {\r\n\t\t\tconst currentDay = firstDay.clone().add(day, 'day');\r\n\t\t\tconst date = currentDay.format('YYYY-MM-DD');\r\n\t\t\tconst datetimeOption = { date, times: [] };\r\n\t\t\tfor (let hour = 8; hour <= 16; hour++) {\r\n\t\t\t\tfor (let slot = 0; slot <= 6; slot++) {\r\n\t\t\t\t\tif (hour === 16 && slot >= 5) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst availabilityDatetime = firstDay.clone().add(day, 'day').add(hour, 'hour').add(slot * 10, 'minute');\r\n\t\t\t\t\tdatetimeOption.times.push({ time: availabilityDatetime.format('HH:mm'), value: availabilityDatetime.format() });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdatetimeOptions.push(datetimeOption);\r\n\t\t}\r\n\t\treturn datetimeOptions;\r\n\t}\r\n\r\n\tstatic getDatetimeOptionsForEjecutivo = function (ejecutivo, duration, ejecutivoAppointments) {\r\n\t\tlet datetimeOptions = [];\r\n\t\tif (ejecutivo) {\r\n\t\t\tconst dates = [];\r\n\t\t\tfor (let availability of ejecutivo.availability) {\r\n\t\t\t\tconst datetime = moment(availability.datetime);\r\n\t\t\t\tconst date = datetime.format('YYYY-MM-DD');\r\n\t\t\t\tif (dates.includes(date) === false) {\r\n\t\t\t\t\tdates.push(date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdates.sort();\r\n\t\t\tdatetimeOptions = dates.map(date => {\r\n\t\t\t\tconst result = { date, times: [] };\r\n\t\t\t\tfor (let availability of ejecutivo.availability) {\r\n\t\t\t\t\tconst availabilityDatetime = moment(availability.datetime);\r\n\t\t\t\t\tconst availabilityDate = availabilityDatetime.format('YYYY-MM-DD');\r\n\t\t\t\t\tif (availabilityDate === date) {\r\n\t\t\t\t\t\tconst isAvailable = AppointmentInputComponent.isDatetimeAvailableForEjecutivo(ejecutivo, availabilityDatetime, duration, ejecutivoAppointments);\r\n\t\t\t\t\t\tif (isAvailable === true) {\r\n\t\t\t\t\t\t\tresult.times.push({ time: availabilityDatetime.format('HH:mm'), value: availability.datetime });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\t\t\tdatetimeOptions = datetimeOptions.filter(datetimeOption => datetimeOption.times.length > 0);\r\n\t\t}\r\n\t\treturn datetimeOptions;\r\n\t}\r\n\r\n\tstatic isDatetimeAvailableForEjecutivo = function (ejecutivo, datetimeMoment, duration, ejecutivoAppointments, currentAppointmentId) {\r\n\t\tlet isAvailable = true;\r\n\t\tfor (let i = 0; i < duration / 10; i++) {\r\n\t\t\tconst adjustedDatetimeMoment = datetimeMoment.clone().add(i * 10, 'minutes');\r\n\t\t\tconst availableSlot = ejecutivo.availability.find(element => element.datetime === adjustedDatetimeMoment.format());\r\n\t\t\tif (!availableSlot) {\r\n\t\t\t\tisAvailable = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (AppointmentInputComponent.isDatetimeBlockedByAppointments(ejecutivoAppointments, adjustedDatetimeMoment, currentAppointmentId) === true) {\r\n\t\t\t\tisAvailable = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isAvailable;\r\n\t}\r\n\r\n\tstatic isDatetimeBlockedByAppointments = function (appointments, datetimeMoment, currentAppointmentId) {\r\n\t\tlet result = false;\r\n\t\tfor (const appointment of appointments) {\r\n\t\t\tif (currentAppointmentId && appointment.id === currentAppointmentId) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tconst appointmentDatetime = moment(appointment.datetime);\r\n\t\t\tfor (let i = 0; i < appointment.duration / 10; i++) {\r\n\t\t\t\tconst adjustedAppointmentDateTime = appointmentDatetime.clone().add(i * 10, 'minutes');\r\n\t\t\t\tif (adjustedAppointmentDateTime.isSame(datetimeMoment) === true) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (result === true) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetAsistenteAppointments = asistente => {\r\n\t\tconst asistenteId = asistente.id;\r\n\t\treturn this.props.appointments.filter(appointment => appointment.asistentes.find(asistente => asistente.id === asistenteId));\r\n\t}\r\n\r\n\tgetAsistenteOptionStyle(asistente) {\r\n\t\tconst style = {};\r\n\t\tconst asistenteAppointments = this.getAsistenteAppointments(asistente)\r\n\t\tconst isAvailable = AppointmentInputComponent.isDatetimeBlockedByAppointments(asistenteAppointments, moment(this.state.datetime), this.state.id) === false;\r\n\t\tif (isAvailable === true) {\r\n\t\t\tstyle['background-color'] = '#81c784';\r\n\t\t} else {\r\n\t\t\tstyle['background-color'] = '#e57373';\r\n\t\t}\r\n\t\treturn style;\r\n\t}\r\n\r\n\tgetEjecutivoAppointments = ejecutivo => {\r\n\t\tconst ejecutivoId = ejecutivo.id;\r\n\t\treturn this.props.appointments.filter(appointment => appointment.ejecutivos.find(ejecutivo => ejecutivo.id === ejecutivoId));\r\n\t}\r\n\r\n\tgetEjecutivoOptionStyle(ejecutivo) {\r\n\t\tconst style = {};\r\n\t\tconst ejecutivoAppointments = this.getEjecutivoAppointments(ejecutivo);\r\n\t\tif (ejecutivo.availability) {\r\n\t\t\tconst isAvailable = AppointmentInputComponent.isDatetimeAvailableForEjecutivo(ejecutivo, moment(this.state.datetime), this.state.duration, ejecutivoAppointments, this.state.id);\r\n\t\t\tif (isAvailable === true) {\r\n\t\t\t\tstyle['background-color'] = '#81c784';\r\n\t\t\t} else {\r\n\t\t\t\tstyle['background-color'] = '#e57373';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn style;\r\n\t}\r\n\r\n\thandleCancel = () => {\r\n\t\tthis.setState({ open: false });\r\n\t\tthis.props.onClose();\r\n\t};\r\n\r\n\thandleDelete = () => {\r\n\t\tthis.setState({ open: false });\r\n\t\tthis.props.onClose();\r\n\t\tthis.props.onDelete(this.state.id);\r\n\t};\r\n\r\n\thandleCheckedChange = (event) => {\r\n\t\tthis.setState({ [event.target.name]: event.target.checked });\r\n\t}\r\n\r\n\thandleFormSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tthis.props.onSubmit({\r\n\t\t\tid: this.state.id,\r\n\t\t\tasistentes: this.state.asistentes,\r\n\t\t\tdatetime: this.state.datetime,\r\n\t\t\tduration: this.state.duration,\r\n\t\t\tejecutivos: this.state.ejecutivos\r\n\t\t});\r\n\t\tthis.setState({ open: false });\r\n\t\tthis.props.onClose();\r\n\t};\r\n\r\n\thandleValueChange = event => this.handleMultipleValueChange(event.target.name, event.target.value);\r\n\r\n\thandleMultipleValueChange = (name, value) => {\r\n\t\tthis.setState(\r\n\t\t\t{ [name]: value },\r\n\t\t\t() => {\r\n\t\t\t\tlet datetimeOptions = null;\r\n\t\t\t\tif (this.state.ejecutivos.length > 0) {\r\n\t\t\t\t\tconst ejecutivoAppointments = this.props.appointments.filter(appointment => appointment.ejecutivos.find(ejecutivo => ejecutivo.id === this.state.ejecutivos[0].id));\r\n\t\t\t\t\tdatetimeOptions = AppointmentInputComponent.getDatetimeOptionsForEjecutivo(this.state.ejecutivos[0], this.state.duration, ejecutivoAppointments)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdatetimeOptions = AppointmentInputComponent.getDatetimeOptions();\r\n\t\t\t\t}\r\n\t\t\t\tlet datetime = this.state.datetime;\r\n\t\t\t\tif (!datetimeOptions.find(datetimeOption => datetimeOption.times.find(time => time.value === datetime))) {\r\n\t\t\t\t\tdatetime = datetimeOptions.length > 0 && datetimeOptions[0].times.length > 0 ? datetimeOptions[0].times[0].value : null;\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdatetime: datetime,\r\n\t\t\t\t\tdatetimeOptions: datetimeOptions\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tmakeSelectItems = (datetimeOptions) => {\r\n\t\tconst items = [];\r\n\t\tfor (let i = 0; i < datetimeOptions.length; i++) {\r\n\t\t\tconst datetimeOption = datetimeOptions[i];\r\n\t\t\titems.push(<ListSubheader key={i} disableSticky>{datetimeOption.date}</ListSubheader>);\r\n\t\t\tfor (let j = 0; j < datetimeOption.times.length; j++) {\r\n\t\t\t\tconst datetimeOptionTime = datetimeOption.times[j];\r\n\t\t\t\titems.push(\r\n\t\t\t\t\t<MenuItem key={((i + 1) * 10) + j} value={datetimeOptionTime.value}>\r\n\t\t\t\t\t\t{datetimeOptionTime.time}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn items;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { asistentes, asistentesOptions, datetime, datetimeOptions, duration, ejecutivos, ejecutivosOptions, id, openAlert } = this.state;\r\n\t\treturn (\r\n\t\t\t<Dialog disableBackdropClick={true} open={this.state.open} onClose={this.handleCancel} fullWidth maxWidth=\"sm\">\r\n\t\t\t\t<form onSubmit={this.handleFormSubmit}>\r\n\t\t\t\t\t<DialogTitle>Cita</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\tvalue={asistentes}\r\n\t\t\t\t\t\t\tonChange={(_event, value) => this.handleMultipleValueChange('asistentes', value)}\r\n\t\t\t\t\t\t\toptions={asistentesOptions}\r\n\t\t\t\t\t\t\tgetOptionLabel={option => option.name}\r\n\t\t\t\t\t\t\tfilterSelectedOptions\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\trenderInput={(params) => (\r\n\t\t\t\t\t\t\t\t<TextField {...params} label=\"Asistentes\" margin=\"normal\" />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\trenderTags={(value, getTagProps) =>\r\n\t\t\t\t\t\t\t\tvalue.map((option, index) => (\r\n\t\t\t\t\t\t\t\t\t<Chip label={option.name} style={this.getAsistenteOptionStyle(option)} {...getTagProps({ index })} />\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\tvalue={ejecutivos}\r\n\t\t\t\t\t\t\tonChange={(_event, value) => this.handleMultipleValueChange('ejecutivos', value)}\r\n\t\t\t\t\t\t\toptions={ejecutivosOptions}\r\n\t\t\t\t\t\t\tgetOptionLabel={option => option.name}\r\n\t\t\t\t\t\t\tfilterSelectedOptions\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\trenderInput={(params) => (\r\n\t\t\t\t\t\t\t\t<TextField {...params} label=\"Ejecutivos\" margin=\"normal\" />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\trenderTags={(value, getTagProps) =>\r\n\t\t\t\t\t\t\t\tvalue.map((option, index) => (\r\n\t\t\t\t\t\t\t\t\t<Chip icon={option.isJury === true && <Gavel />} label={option.name} style={this.getEjecutivoOptionStyle(option)} {...getTagProps({ index })} />\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Duración (minutos)\"\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tname=\"duration\"\r\n\t\t\t\t\t\t\tvalue={duration}\r\n\t\t\t\t\t\t\tonChange={this.handleValueChange}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\t\t\tinputProps={{\r\n\t\t\t\t\t\t\t\tmin: 10,\r\n\t\t\t\t\t\t\t\tstep: 10\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\t\t\tshrink: true\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControl fullWidth margin=\"normal\">\r\n\t\t\t\t\t\t\t<InputLabel shrink>\r\n\t\t\t\t\t\t\t\tFecha y hora\r\n        \t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tname=\"datetime\"\r\n\t\t\t\t\t\t\t\tvalue={datetime}\r\n\t\t\t\t\t\t\t\tonChange={this.handleValueChange}\r\n\t\t\t\t\t\t\t\trenderValue={value => value ? moment(value).format('DD MMM, HH:mm') : ''}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{this.makeSelectItems(datetimeOptions)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<Collapse in={openAlert}>\r\n\t\t\t\t\t\t\t<Alert severity=\"error\">This is an error alert — check it out!</Alert>\r\n\t\t\t\t\t\t</Collapse>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t{id && <Button onClick={this.handleDelete} color=\"secondary\">Eliminar</Button>}\r\n\t\t\t\t\t\t<Button onClick={this.handleCancel}>Cancelar</Button>\r\n\t\t\t\t\t\t{this.props.onSubmit &&\r\n\t\t\t\t\t\t\t<Button type=\"submit\" color=\"primary\">Aceptar</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</form>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AppointmentInputComponent","import moment from 'moment-timezone';\r\nimport 'moment/locale/es';\r\n\r\nfunction getIdeatoonProjects(asistentes) {\r\n\tconst ideatoonProjects = [...new Set(asistentes.filter(asistente => !!asistente.ideatoonProjects).flatMap(asistente => asistente.ideatoonProjects))];\r\n\tideatoonProjects.sort((a, b) => sortAlphabetically(a, b));\r\n\treturn ideatoonProjects;\r\n}\r\n\r\nfunction getJurados(ejecutivos) {\r\n\tconst jurados = ejecutivos.filter(ejecutivo => ejecutivo.isJury === true);\r\n\tjurados.sort((a, b) => sortAlphabeticallyByName(a, b));\r\n\treturn jurados;\r\n}\r\n\r\nfunction sortAlphabetically(a, b) {\r\n\tconst nameA = a.toUpperCase();\r\n\tconst nameB = b.toUpperCase();\r\n\tif (nameA < nameB) {\r\n\t\treturn -1;\r\n\t}\r\n\tif (nameA > nameB) {\r\n\t\treturn 1;\r\n\t}\r\n\treturn 0;\r\n}\r\n\r\nfunction sortAlphabeticallyByDatetime(a, b) {\r\n\tif (!a.datetime) {\r\n\t\treturn -1;\r\n\t}\r\n\tif (!b.datetime) {\r\n\t\treturn -1;\r\n\t}\r\n\tvar nameA = moment(a.datetime);\r\n\tvar nameB = moment(b.datetime);\r\n\tif (nameA.isBefore(nameB) === true) {\r\n\t\treturn -1;\r\n\t}\r\n\tif (nameB.isBefore(nameA) === true) {\r\n\t\treturn 1;\r\n\t}\r\n\treturn 0;\r\n}\r\n\r\nfunction sortAlphabeticallyByName(a, b) {\r\n\tconst nameA = a.name.toUpperCase();\r\n\tconst nameB = b.name.toUpperCase();\r\n\tif (nameA < nameB) {\r\n\t\treturn -1;\r\n\t}\r\n\tif (nameA > nameB) {\r\n\t\treturn 1;\r\n\t}\r\n\treturn 0;\r\n}\r\n\r\nexport { getIdeatoonProjects, getJurados, sortAlphabetically, sortAlphabeticallyByDatetime, sortAlphabeticallyByName };","import React from 'react';\r\nimport { Box, Button, Grid, Snackbar } from '@material-ui/core';\r\nimport Appointments from './Appointments'\r\nimport AppointmentInputComponent from './AppointmentInputComponent'\r\nimport moment from 'moment-timezone';\r\nimport 'moment/locale/es';\r\nimport { getJurados, sortAlphabeticallyByDatetime } from './Utils'\r\n\r\nclass AppointmentsPanel extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinputAppointment: null,\r\n\t\t\tinputAppointmentComponentIsOpened: false,\r\n\t\t\tjurados: getJurados(this.props.ejecutivos),\r\n\t\t\tselectedAsistente: null,\r\n\t\t\tselectedEjecutivo: null,\r\n\t\t\tsnackbarOpen: false\r\n\t\t}\r\n\t\tmoment.locale('es');\r\n\t}\r\n\r\n\thandleClickAddAppointment = (asistenteId, ejecutivoId) => {\r\n\t\tconst asistente = this.props.asistentes.find(asistente => asistente.id === asistenteId);\r\n\t\tconst ejecutivo = this.props.ejecutivos.find(ejecutivo => ejecutivo.id === ejecutivoId);\r\n\t\tthis.setState({\r\n\t\t\tinputAppointmentComponentIsOpened: true,\r\n\t\t\tinputAsistente: asistente,\r\n\t\t\tinputEjecutivo: ejecutivo\r\n\t\t});\r\n\t}\r\n\r\n\thandleClickEditAppointment = (id) => {\r\n\t\tconst appointment = this.props.appointments.find(appointment => appointment.id === id);\r\n\t\tthis.setState({\r\n\t\t\tinputAppointmentComponentIsOpened: true,\r\n\t\t\tinputAppointment: appointment\r\n\t\t});\r\n\t}\r\n\r\n\thandleClickExport = () => {\r\n\t\tconst timezone = 'America/Mexico_City';\r\n\t\tconst appointments = this.props.appointments.filter(appointment => appointment.datetime).sort((a, b) => sortAlphabeticallyByDatetime(a, b));\r\n\t\tlet text = '';\r\n\t\tlet currentDate, currentTime;\r\n\t\tfor (const appointment of appointments) {\r\n\t\t\tif (appointment.datetime && appointment.ejecutivos && appointment.asistentes && appointment.duration) {\r\n\r\n\t\t\t\tconst currentDatetime = moment(appointment.datetime);\r\n\t\t\t\tconst date = moment.tz(currentDatetime.format('YYYY-MM-DDTHH:mm'), timezone);\r\n\t\t\t\tif (!currentDate || currentDate !== date.format('dddd DD MMMM')) {\r\n\t\t\t\t\tcurrentDate = date.format('dddd DD MMMM');\r\n\t\t\t\t\ttext += currentDate + '\\r\\n\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\tif (!currentTime || currentTime !== date.format('hh:mm A z (Z)')) {\r\n\t\t\t\t\tcurrentTime = date.format('hh:mm A z (Z)');\r\n\t\t\t\t\ttext += '\\t' + date.tz('America/Mexico_City').format('hh:mm A z (Z)');\r\n\t\t\t\t\ttext += '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\ttext += '\\r\\n';\r\n\t\t\t\tif (appointment.ejecutivos.length > 0) {\r\n\t\t\t\t\ttext += '\\t\\tEjecutivos: ' + appointment.ejecutivos.map(ejecutivo => ejecutivo.name).join(' | ') + '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\tif (appointment.asistentes.length > 0) {\r\n\t\t\t\t\ttext += '\\t\\tAsistentes: ' + appointment.asistentes.map(asistente => asistente.name).join(' | ') + '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\ttext += '\\t\\tDuración: ' + appointment.duration + 'min' + '\\r\\n\\r\\n';\r\n\t\t\t} else {\r\n\t\t\t\t//console.out('Error en ' + appointment);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.copy(text);\r\n\t\tthis.setState({ snackbarOpen: true })\r\n\t}\r\n\r\n\tcopy = (text) => {\r\n\t\tvar textArea = document.createElement(\"textarea\");\r\n\t\ttextArea.value = text;\r\n\r\n\t\t// Avoid scrolling to bottom\r\n\t\ttextArea.style.top = \"0\";\r\n\t\ttextArea.style.left = \"0\";\r\n\t\ttextArea.style.position = \"fixed\";\r\n\r\n\t\tdocument.body.appendChild(textArea);\r\n\t\ttextArea.focus();\r\n\t\ttextArea.select();\r\n\r\n\t\ttry {\r\n\t\t\tvar successful = document.execCommand('copy');\r\n\t\t\tvar msg = successful ? 'successful' : 'unsuccessful';\r\n\t\t\tconsole.log('Fallback: Copying text command was ' + msg);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Fallback: Oops, unable to copy', err);\r\n\t\t}\r\n\r\n\t\tdocument.body.removeChild(textArea);\r\n\t}\r\n\r\n\thandleDeleteAppointment = (id) => {\r\n\t\tthis.props.onDeleteAppointment(id);\t\t\r\n\t}\r\n\r\n\thandleInputAppointmentClose = () => {\r\n\t\tthis.setState({ inputAppointmentComponentIsOpened: false, inputAppointment: null });\r\n\t}\r\n\r\n\thandleSelectAsistente = (asistente) => {\r\n\t\tthis.setState({ selectedAsistente: asistente });\r\n\t}\r\n\r\n\thandleSelectEjecutivo = (ejecutivo) => {\r\n\t\tthis.setState({ selectedEjecutivo: ejecutivo });\r\n\t}\r\n\r\n\thandleSnackbarClose = () => {\r\n\t\tthis.setState({ snackbarOpen: false });\r\n\t}\r\n\r\n\thandleSubmitAppointment = (appointment) => {\r\n\t\tthis.props.onSubmitAppointment(appointment);\t\t\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { snackbarOpen } = this.state;\r\n\t\tconst { appointments, asistentes, ejecutivos } = this.props;\r\n\t\treturn (\r\n\t\t\t<Box>\r\n\t\t\t\t<AppointmentInputComponent\r\n\t\t\t\t\topen={this.state.inputAppointmentComponentIsOpened}\r\n\t\t\t\t\tappointment={this.state.inputAppointment}\r\n\t\t\t\t\tappointments={appointments}\r\n\t\t\t\t\tasistente={this.state.inputAsistente}\r\n\t\t\t\t\tasistentes={asistentes}\r\n\t\t\t\t\tejecutivo={this.state.inputEjecutivo}\r\n\t\t\t\t\tejecutivos={ejecutivos}\r\n\t\t\t\t\tonClose={this.handleInputAppointmentClose}\r\n\t\t\t\t\tonDelete={this.handleDeleteAppointment}\r\n\t\t\t\t\tonSubmit={this.handleSubmitAppointment} />\r\n\t\t\t\t<Snackbar\r\n\t\t\t\t\topen={snackbarOpen}\r\n\t\t\t\t\tonClose={this.handleSnackbarClose}\r\n\t\t\t\t\tautoHideDuration={3000}\r\n\t\t\t\t\tmessage=\"Agenda copiada\"\r\n\t\t\t\t/>\t\t\t\r\n\t\t\t<Grid container spacing={2} style={{ \"height\": \"500px\" }}>\r\n\t\t\t\t<Grid item xs={12} style={{ \"height\": \"500px\" }}>\r\n\t\t\t\t\t<Appointments\r\n\t\t\t\t\t\tappointments={appointments}\r\n\t\t\t\t\t\tasistentes={asistentes}\r\n\t\t\t\t\t\tejecutivos={ejecutivos}\r\n\t\t\t\t\t\tonAddAppointment={this.handleClickAddAppointment}\r\n\t\t\t\t\t\tonEditAppointment={this.handleClickEditAppointment}\r\n\t\t\t\t\t/>\t\t\t\t\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xd={12}>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\tjustifyContent=\"flex-end\"\r\n\t\t\t\t\t\talignItems=\"center\"\t\t\t\t\t\t\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Button style={{ \"margin-top\": \"5px\" }} onClick={this.handleClickExport}>\r\n\t\t\t\t\t\t\tExportar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AppointmentsPanel;","import React from 'react';\r\nimport { Avatar, IconButton, ListItem, ListItemAvatar, ListItemText, ListItemSecondaryAction, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { EmojiEvents, MoreVert } from '@material-ui/icons'\r\nimport { FixedSizeList } from 'react-window';\r\n\r\nclass Asistentes extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tselectedAsistente: null\r\n\t\t}\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tthis.refs.list.forceUpdate();\r\n\t\treturn true;\r\n\t}\r\n\r\n\thandleItemDelete = (id) => {\r\n\t\tthis.props.onDelete(id);\r\n\t}\r\n\r\n\thandleItemEdit = (id) => {\r\n\t\tthis.props.onEdit(id);\r\n\t}\r\n\r\n\thandleItemSelect = (id) => {\r\n\t\tconst selectedAsistente = this.props.asistentes.find(asistente => asistente.id === id);\r\n\t\tthis.setState({ selectedAsistente: selectedAsistente });\r\n\t\tthis.props.onSelect(selectedAsistente);\r\n\t\tthis.refs.list.forceUpdate();\r\n\t}\r\n\r\n\thandleSendSchedule = (id) => {\r\n\t\tthis.props.onSendSchedule(id);\r\n\t}\r\n\r\n\trenderRow = (props) => {\r\n\t\tconst { index, style } = props;\r\n\t\tconst asistente = this.props.asistentes[index];\r\n\t\tconst { selectedAsistente } = this.state;\r\n\t\treturn (\r\n\t\t\t<Asistente\r\n\t\t\t\tkey={asistente.id}\r\n\t\t\t\tid={asistente.id}\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tname={asistente.name}\r\n\t\t\t\tideatoonProjects={asistente.ideatoonProjects}\r\n\t\t\t\tisSelected={asistente.id === selectedAsistente?.id}\r\n\t\t\t\tstudio={asistente.studio}\r\n\t\t\t\ttimezone={asistente.timezone}\r\n\t\t\t\tonDelete={this.handleItemDelete}\r\n\t\t\t\tonEdit={this.handleItemEdit}\r\n\t\t\t\tonSelect={this.handleItemSelect}\r\n\t\t\t\tonSendSchedule={this.handleSendSchedule}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { asistentes } = this.props;\r\n\t\treturn (\r\n\t\t\t<FixedSizeList\r\n\t\t\t\tref='list'\r\n\t\t\t\titemSize={80}\r\n\t\t\t\titemCount={asistentes.length}\r\n\t\t\t\theight={400}\r\n\t\t\t>\r\n\t\t\t\t{this.renderRow}\r\n\t\t\t</FixedSizeList>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass Asistente extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tanchorEl: null\r\n\t\t}\r\n\t}\r\n\r\n\thandleItemClick = () => {\r\n\t\tthis.props.onSelect(this.props.id);\r\n\t}\r\n\r\n\thandleItemEdit = () => {\r\n\t\tthis.props.onEdit(this.props.id);\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\thandleItemDelete = () => {\r\n\t\tthis.props.onDelete(this.props.id);\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\thandleMenuOpen = (event) => {\r\n\t\tthis.setState({ anchorEl: event.currentTarget });\r\n\t}\r\n\r\n\thandleMenuClose = () => {\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\thandleSendSchedule = () => {\r\n\t\tthis.props.onSendSchedule(this.props.id);\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ListItem\r\n\t\t\t\tbutton\r\n\t\t\t\tdense\r\n\t\t\t\tselected={this.props.isSelected}\r\n\t\t\t\tContainerProps={{ style: this.props.style }}\r\n\t\t\t\tContainerComponent=\"div\"\r\n\t\t\t\tonClick={this.handleItemClick}\r\n\t\t\t>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t{this.props.ideatoonProjects && this.props.ideatoonProjects.length > 0\r\n\t\t\t\t\t\t? <Avatar><EmojiEvents /></Avatar>\r\n\t\t\t\t\t\t: <Avatar></Avatar>\r\n\t\t\t\t\t}\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText primary={this.props.name} primaryTypographyProps={{ noWrap: true }} secondary={\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<Typography variant=\"body2\" noWrap>{this.props.studio}</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body2\" noWrap>{this.props.ideatoonProjects && this.props.ideatoonProjects.length > 0 && 'Ideatoon: ' + this.props.ideatoonProjects.join(', ')}</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body2\" noWrap>{this.props.timezone ?? 'No timezone'}</Typography>\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t<IconButton edge=\"end\" onClick={this.handleMenuOpen}>\r\n\t\t\t\t\t\t<MoreVert />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<Menu anchorEl={this.state.anchorEl} keepMounted open={Boolean(this.state.anchorEl)} onClose={this.handleMenuClose}>\r\n\t\t\t\t\t\t<MenuItem onClick={this.handleItemEdit}>Editar</MenuItem>\r\n\t\t\t\t\t\t<MenuItem onClick={this.handleItemDelete}>Eliminar</MenuItem>\r\n\t\t\t\t\t\t<MenuItem onClick={this.handleSendSchedule}>Enviar Agenda</MenuItem>\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Asistentes;","import React from 'react';\r\nimport { Button, Checkbox, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, FormControlLabel, FormGroup, FormLabel, TextField } from '@material-ui/core';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport moment from 'moment-timezone';\r\nimport 'moment/locale/es';\r\n\r\nclass AsistenteInputComponent extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tmoment.locale('es');\r\n\t\tthis.state = AsistenteInputComponent.stateFromProps(props);\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n\t\tif (props.open === true && state.open === false) {\r\n\t\t\treturn AsistenteInputComponent.stateFromProps(props);\r\n\t\t} else {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stateFromProps = function (props) {\r\n\t\tconst asistente = props.asistente;\r\n\t\treturn {\r\n\t\t\topen: props.open,\r\n\t\t\tid: asistente?.id || null,\r\n\t\t\tname: asistente?.name || '',\r\n\t\t\tideatoonProjects: asistente?.ideatoonProjects || [],\r\n\t\t\tideatoonProjectOptions: props.ideatoonProjects,\r\n\t\t\tcgi: asistente?.cgi || false,\r\n\t\t\tlatamTopArtistOrFreelanceTalent: asistente?.latamTopArtistOrFreelanceTalent || false,\r\n\t\t\tnewIPs: asistente?.newIPs || false,\r\n\t\t\tnewIdeas: asistente?.newIdeas || false,\r\n\t\t\tstudio: asistente?.studio || '',\r\n\t\t\tstopMotion: asistente?.stopMotion || false,\r\n\t\t\ttargetPreschool: asistente?.targetPreschool || false,\r\n\t\t\ttargetKids: asistente?.targetKids || false,\r\n\t\t\ttargetPrime: asistente?.targetPrime || false,\r\n\t\t\ttargetAdult: asistente?.targetAdult || false,\r\n\t\t\ttimezone: asistente?.timezone || 'America/Mexico_City',\r\n\t\t\ttopStudio: asistente?.topStudio || false,\r\n\t\t\ttwoD: asistente?.twoD || false,\r\n\t\t\tthreeD: asistente?.threeD || false,\r\n\t\t\tvideogames: asistente?.videogames || false,\r\n\t\t};\r\n\t}\r\n\r\n\thandleCancel = () => {\r\n\t\tthis.setState({ open: false });\r\n\t\tthis.props.onClose();\r\n\t};\r\n\r\n\thandleCheckedChange = (event) => {\r\n\t\tthis.setState({ [event.target.name]: event.target.checked });\r\n\t}\r\n\r\n\thandleFormSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tthis.props.onSubmit({\r\n\t\t\tid: this.state.id,\r\n\t\t\tname: this.state.name.trim(),\r\n\t\t\tideatoonProjects: this.state.ideatoonProjects,\r\n\t\t\tcgi: this.state.cgi,\r\n\t\t\tlatamTopArtistOrFreelanceTalent: this.state.latamTopArtistOrFreelanceTalent,\r\n\t\t\tnewIPs: this.state.newIPs,\r\n\t\t\tnewIdeas: this.state.newIdeas,\r\n\t\t\tstopMotion: this.state.stopMotion,\r\n\t\t\tstudio: this.state.studio,\r\n\t\t\ttargetPreschool: this.state.targetPreschool,\r\n\t\t\ttargetKids: this.state.targetKids,\r\n\t\t\ttargetPrime: this.state.targetPrime,\r\n\t\t\ttargetAdult: this.state.targetAdult,\r\n\t\t\ttimezone: this.state.timezone,\r\n\t\t\ttopStudio: this.state.topStudio,\r\n\t\t\ttwoD: this.state.twoD,\r\n\t\t\tthreeD: this.state.threeD,\r\n\t\t\tvideogames: this.state.videogames\r\n\t\t});\r\n\t\tthis.setState({ open: false });\r\n\t\tthis.props.onClose();\r\n\t};\r\n\r\n\thandleValueChange = (event) => {\r\n\t\tthis.setState({ [event.target.name]: event.target.value });\r\n\t}\r\n\r\n\thandleMultipleValueChange = (name, value) => {\r\n\t\tthis.setState({ [name]: value });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { name, ideatoonProjectOptions, ideatoonProjects, topStudio, cgi, latamTopArtistOrFreelanceTalent, newIPs, newIdeas, stopMotion, studio, targetPreschool, targetKids, targetPrime, targetAdult, twoD, threeD, videogames } = this.state;\r\n\t\treturn (\r\n\t\t\t<Dialog disableBackdropClick={true} open={this.state.open} onClose={this.handleCancel}>\r\n\t\t\t\t<form onSubmit={this.handleFormSubmit}>\r\n\t\t\t\t\t<DialogTitle>Asistente</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<TextField autoFocus fullWidth={true} label=\"Name\" margin=\"dense\" name=\"name\" required type=\"text\" value={name}\r\n\t\t\t\t\t\t\tonChange={this.handleValueChange} />\r\n\t\t\t\t\t\t<TextField fullWidth={true} label=\"Studio name\" margin=\"dense\" name=\"studio\" type=\"text\" value={studio}\r\n\t\t\t\t\t\t\tonChange={this.handleValueChange} />\r\n\t\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\tvalue={ideatoonProjects}\r\n\t\t\t\t\t\t\tonChange={(_event, value) => this.handleMultipleValueChange('ideatoonProjects', value)}\r\n\t\t\t\t\t\t\tselectOnFocus\r\n\t\t\t\t\t\t\tclearOnBlur\r\n\t\t\t\t\t\t\thandleHomeEndKeys\r\n\t\t\t\t\t\t\toptions={ideatoonProjectOptions}\r\n\t\t\t\t\t\t\tfreeSolo\r\n\t\t\t\t\t\t\tfilterSelectedOptions\r\n\t\t\t\t\t\t\trenderInput={(params) => (\r\n\t\t\t\t\t\t\t\t<TextField {...params} label=\"Ideatoon project\" margin=\"dense\" />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"2D\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={twoD} onChange={this.handleCheckedChange} name=\"twoD\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"3D\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={threeD} onChange={this.handleCheckedChange} name=\"threeD\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"Videogames\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={videogames} onChange={this.handleCheckedChange} name=\"videogames\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"Stop motion\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={stopMotion} onChange={this.handleCheckedChange} name=\"stopMotion\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"CGI\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={cgi} onChange={this.handleCheckedChange} name=\"cgi\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControl component=\"fieldset\" margin=\"dense\" fullWidth={true}>\r\n\t\t\t\t\t\t\t<FormLabel component=\"legend\">Target</FormLabel>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Preschool (4-7)\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={targetPreschool} onChange={this.handleCheckedChange} name=\"targetPreschool\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Kids (8-12)\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={targetKids} onChange={this.handleCheckedChange} name=\"targetKids\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Prime time\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={targetPrime} onChange={this.handleCheckedChange} name=\"targetPrime\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Adult\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={targetAdult} onChange={this.handleCheckedChange} name=\"targetAdult\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<FormControl component=\"fieldset\" margin=\"dense\" fullWidth={true}>\r\n\t\t\t\t\t\t\t<FormLabel component=\"legend\">Interests in the market</FormLabel>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Studio that provide services or work-from-hire\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={topStudio} onChange={this.handleCheckedChange} name=\"topStudio\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"New IPs in development\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={newIPs} onChange={this.handleCheckedChange} name=\"newIPs\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Rising and 'under the radar' studios\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={newIdeas} onChange={this.handleCheckedChange} name=\"newIdeas\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Latam top artist or freelance talent\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={latamTopArtistOrFreelanceTalent} onChange={this.handleCheckedChange} name=\"latamTopArtistOrFreelanceTalent\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.handleCancel}>Cancelar</Button>\r\n\t\t\t\t\t\t<Button type=\"submit\" color=\"primary\">Aceptar</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</form>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { AsistenteInputComponent };","import React from 'react';\r\nimport { Box, Table, TableBody, TableCell, TableHead, TableRow } from '@material-ui/core';\r\nimport moment from 'moment-timezone';\r\nimport AppointmentInputComponent from './AppointmentInputComponent'\r\n\r\nclass AppointmentsCalendar extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst timezone = 'America/Mexico_City';\r\n\t\tconst rows = [];\r\n\t\tfor (let i = 0; i < 24 * 6; i++) {\r\n\t\t\tconst totalMinutes = 10 * i;\r\n\t\t\tconst isDisplayTimeEnabled = totalMinutes % 60 === 0;\r\n\t\t\tlet displayTime = '';\r\n\t\t\tconst minute = totalMinutes % 60;\r\n\t\t\tconst hour = (totalMinutes - minute) / 60;\r\n\t\t\tif (isDisplayTimeEnabled === true) {\r\n\t\t\t\tif (hour === 0) {\r\n\t\t\t\t\tdisplayTime += '12';\r\n\t\t\t\t} else if (hour < 10) {\r\n\t\t\t\t\tdisplayTime += '0' + hour;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdisplayTime += hour;\r\n\t\t\t\t}\r\n\t\t\t\tif (minute !== 0) {\r\n\t\t\t\t\tdisplayTime += ':';\r\n\t\t\t\t\tif (minute === 0) {\r\n\t\t\t\t\t\tdisplayTime += '00'\r\n\t\t\t\t\t} else if (minute < 10) {\r\n\t\t\t\t\t\tdisplayTime += '0' + minute;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdisplayTime += minute;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst cells = [];\r\n\t\t\tconst firstDay = moment.tz('2022-09-05', timezone);\r\n\t\t\tfor (let day = 0; day < 6; day++) {\r\n\t\t\t\tconst datetime = firstDay.clone().add(day, 'day').add(hour, 'hour').add(minute, 'minute').format();\r\n\t\t\t\tcells.push({ datetime });\r\n\t\t\t}\r\n\t\t\trows.push({ displayTime, hour, cells });\r\n\t\t}\r\n\t\tthis.state = {\r\n\t\t\tinputAppointment: null,\r\n\t\t\tinputAppointmentComponentIsOpened: false,\r\n\t\t\trows: rows,\r\n\t\t\ttimezone: timezone,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif ((!this.props.ejecutivo && !this.props.asistente) ||\r\n\t\t\t(prevProps.ejecutivo !== this.props.ejecutivo) ||\r\n\t\t\t(prevProps.asistente !== this.props.asistente) || \r\n\t\t\t(prevProps.appointments !== this.props.appointments)) {\r\n\t\t\tthis.clearActiveCells();\r\n\t\t\tthis.clearAppointmentCells();\r\n\t\t}\r\n\t\tif (prevProps.ejecutivo !== this.props.ejecutivo) {\r\n\t\t\tthis.clearAvailableCells();\r\n\t\t\tif (this.props.ejecutivo) {\r\n\t\t\t\tthis.displayAvailability(this.props.ejecutivo.availability);\r\n\t\t\t\tthis.displayEjecutivoAppointments();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.props.asistente) {\r\n\t\t\tthis.displayAsistenteAppointments();\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tdisplayAvailability(availability) {\r\n\t\tdocument.querySelectorAll('td.calendar-cell').forEach(element => {\r\n\t\t\tavailability.forEach(availability => {\r\n\t\t\t\tif (element.dataset.datetime === availability.datetime) {\r\n\t\t\t\t\telement.classList.add('available');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tdisplayAsistenteAppointments() {\r\n\t\tthis.props.appointments.forEach(appointment => {\r\n\t\t\tif (appointment.asistentes.find(asistente => asistente.id === this.props.asistente.id)) {\r\n\t\t\t\tconst calendarCells = Array.from(document.querySelectorAll('td.calendar-cell'));\r\n\t\t\t\tfor (let i = 0; i < appointment.duration / 10; i++) {\r\n\t\t\t\t\tconst datetime = moment(appointment.datetime).add(i * 10, 'minute').format();\r\n\t\t\t\t\tconst calendarCell = calendarCells.find(cell => cell.dataset.datetime === datetime);\r\n\t\t\t\t\tif (calendarCell) {\r\n\t\t\t\t\t\tcalendarCell.setAttribute('data-appointment-id', appointment.id);\r\n\t\t\t\t\t\tcalendarCell.classList.add('appointment');\r\n\t\t\t\t\t\tif (appointment.ejecutivos.length === 0) {\r\n\t\t\t\t\t\t\tcalendarCell.classList.add('extra');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdisplayEjecutivoAppointments() {\r\n\t\tthis.props.appointments.forEach(appointment => {\r\n\t\t\tif (appointment.ejecutivos.find(ejecutivo => ejecutivo.id === this.props.ejecutivo.id)) {\r\n\t\t\t\tconst calendarCells = Array.from(document.querySelectorAll('td.calendar-cell'));\r\n\t\t\t\tfor (let i = 0; i < appointment.duration / 10; i++) {\r\n\t\t\t\t\tconst datetime = moment(appointment.datetime).add(i * 10, 'minute').format();\r\n\t\t\t\t\tconst calendarCell = calendarCells.find(cell => cell.dataset.datetime === datetime);\r\n\t\t\t\t\tcalendarCell.classList.add('appointment');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetAdjacentCells(cell) {\r\n\t\tconst cellMoment = moment(cell.dataset.datetime);\r\n\t\tconst date = cellMoment.format('YYYY-MM-DD');\r\n\t\tconst hour = cellMoment.format('H');\r\n\t\tconst minute = cellMoment.format('m');\r\n\t\tconst calendarCells = Array.from(document.querySelectorAll('td.calendar-cell'));\r\n\t\treturn calendarCells.filter(element => {\r\n\t\t\tconst elementMoment = moment(element.dataset.datetime);\r\n\t\t\tconst elementDate = elementMoment.format('YYYY-MM-DD');\r\n\t\t\tconst elementHour = elementMoment.format('H');\r\n\t\t\tconst elementMinute = elementMoment.format('m');\r\n\t\t\tif (elementDate !== date) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (elementHour !== hour) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (minute < 30 && elementMinute < 30) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (minute >= 30 && elementMinute >= 30) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\r\n\tgetHeaderCells(cell) {\r\n\t\tconst cellDate = moment(cell.dataset.datetime).format('YYYY-MM-DD');\r\n\t\tconst cellHour = moment(cell.dataset.datetime).format('H');\r\n\t\tconst result = [];\r\n\t\tconst colHeaders = Array.from(document.querySelectorAll('thead > tr > th.calendar-cell'));\r\n\t\tconst colHeader = colHeaders.find(element => element.dataset.date === cellDate);\r\n\t\tresult.push(colHeader);\r\n\t\tconst rowHeaders = Array.from(document.querySelectorAll('tbody > tr > th.calendar-cell'));\r\n\t\tconst rowHeader = rowHeaders.find(element => element.dataset.hour === cellHour);\r\n\t\tresult.push(rowHeader);\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetInputAvailability() {\r\n\t\tconst availableCalendarCells = Array.from(document.querySelectorAll('td.calendar-cell.available'));\r\n\t\tconst availability = availableCalendarCells.map((element) => {\r\n\t\t\treturn { datetime: element.dataset.datetime }\r\n\t\t});\r\n\t\tavailability.id = this.props.ejecutivo.id;\r\n\t\treturn availability;\r\n\t}\r\n\r\n\tclearActiveCells = () => {\r\n\t\tconst calendarCells = Array.from(document.querySelectorAll('.calendar-cell.active'));\r\n\t\tcalendarCells.forEach(element => element.classList.remove('active'));\r\n\t}\r\n\r\n\tclearAppointmentCells = () => {\r\n\t\tconst calendarCells = Array.from(document.querySelectorAll('.calendar-cell.appointment'));\r\n\t\tcalendarCells.forEach(element => {\r\n\t\t\telement.removeAttribute('data-appointment-id');\r\n\t\t\telement.classList.remove('appointment');\r\n\t\t});\r\n\t}\r\n\r\n\tclearAvailableCells = () => {\r\n\t\tconst calendarCells = Array.from(document.querySelectorAll('.calendar-cell.available'));\r\n\t\tcalendarCells.forEach(element => element.classList.remove('available'));\r\n\t}\r\n\r\n\thandleClick = (event) => {\r\n\t\tif (this.props.ejecutivo) {\r\n\t\t\tconst adjacentCells = this.getAdjacentCells(event.target);\r\n\t\t\tif (event.target.classList.contains('available') === true) {\r\n\t\t\t\tadjacentCells.forEach(element => element.classList.remove('available'));\r\n\t\t\t} else {\r\n\t\t\t\tadjacentCells.forEach(element => element.classList.add('available'));\r\n\t\t\t}\r\n\t\t\tconst availability = this.getInputAvailability();\r\n\t\t\tthis.props.onSubmitAvailability(availability);\r\n\t\t} else if (this.props.asistente) {\r\n\t\t\tconst appointmentId = event.target.dataset.appointmentId;\r\n\t\t\tif (appointmentId) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tinputAppointment: this.props.appointments.find(appointment => appointment.id === appointmentId),\r\n\t\t\t\t\tinputAppointmentComponentIsOpened: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleDeleteAppointment = (id) => this.props.onDeleteAppointment(id);\t\r\n\r\n\thandleInputAppointmentClose = () => this.setState({ inputAppointmentComponentIsOpened: false });\t\r\n\r\n\thandleMouseOver = (event) => {\r\n\t\tif (!this.props.ejecutivo) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.clearActiveCells();\r\n\t\tconst adjacentCells = this.getAdjacentCells(event.target);\r\n\t\tadjacentCells.forEach(element => element.classList.add('active'));\r\n\t\tconst headerCells = this.getHeaderCells(event.target);\r\n\t\theaderCells.forEach(element => element.classList.add('active'));\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Box>\r\n\t\t\t\t<AppointmentInputComponent\r\n\t\t\t\t\topen={this.state.inputAppointmentComponentIsOpened}\r\n\t\t\t\t\tappointment={this.state.inputAppointment}\r\n\t\t\t\t\tappointments={this.props.appointments}\r\n\t\t\t\t\tonClose={this.handleInputAppointmentClose}\r\n\t\t\t\t\tonDelete={this.handleDeleteAppointment}\r\n\t\t\t\t/>\r\n\t\t\t\t<Table>\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t<TableCell></TableCell>\r\n\t\t\t\t\t\t\t<TableCell className=\"calendar-cell\" align=\"center\" data-date=\"2022-09-05\">Sep 5<br />Lunes</TableCell>\r\n\t\t\t\t\t\t\t<TableCell className=\"calendar-cell\" align=\"center\" data-date=\"2022-09-06\">Sep 6<br />Martes</TableCell>\r\n\t\t\t\t\t\t\t<TableCell className=\"calendar-cell\" align=\"center\" data-date=\"2022-09-07\">Sep 7<br />Miércoles</TableCell>\r\n\t\t\t\t\t\t\t<TableCell className=\"calendar-cell\" align=\"center\" data-date=\"2022-09-08\">Sep 8<br />Jueves</TableCell>\r\n\t\t\t\t\t\t\t<TableCell className=\"calendar-cell\" align=\"center\" data-date=\"2022-09-09\">Sep 9<br />Viernes</TableCell>\r\n\t\t\t\t\t\t\t<TableCell className=\"calendar-cell\" align=\"center\" data-date=\"2022-09-10\">Sep 10<br />Sábado</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody onMouseLeave={this.clearActiveCells}>\r\n\t\t\t\t\t\t{this.state.rows.map((row, index) => (\r\n\t\t\t\t\t\t\t<TableRow key={index}>\r\n\t\t\t\t\t\t\t\t{row.displayTime.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t<TableCell className=\"calendar-cell\" rowSpan={6} component=\"th\" scope=\"row\" onMouseOver={this.clearActiveCells} data-hour={row.hour}>{row.displayTime}</TableCell>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t{row.cells.map((cell, index) => (\r\n\t\t\t\t\t\t\t\t\t<TableCell key={index} className=\"calendar-cell\" onClick={this.handleClick} onMouseOver={this.handleMouseOver} data-datetime={cell.datetime}></TableCell>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</Box>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { AppointmentsCalendar };","import React from 'react';\r\nimport { Box, Card, CardContent, CardHeader, Grid, IconButton, Modal } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons'\r\nimport moment from 'moment-timezone';\r\nimport 'moment/locale/es';\r\nimport Asistentes from './Asistentes'\r\nimport { AsistenteInputComponent } from './AsistenteInputComponent'\r\nimport { AppointmentsCalendar } from './AppointmentsCalendar'\r\nimport { getIdeatoonProjects, sortAlphabeticallyByDatetime } from './Utils'\r\n\r\nclass AsistentesPanel extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tideatoonProjects: getIdeatoonProjects(this.props.asistentes),\r\n\t\t\tinputAsistente: null,\r\n\t\t\tinputAsistenteComponentIsOpened: false,\r\n\t\t\tmodalBody: '',\r\n\t\t\tselectedAsistente: null,\r\n\t\t\tsnackbarOpen: false\r\n\t\t}\r\n\t\tmoment.locale('es');\r\n\t}\r\n\r\n\thandleClickAddAsistente = () => {\r\n\t\tthis.setState({ inputAsistenteComponentIsOpened: true });\r\n\t}\r\n\r\n\thandleDeleteAsistente = (id) => {\r\n\t\tif (this.state.selectedAsistente?.id === id) {\r\n\t\t\tthis.setState({ selectedAsistente: null });\r\n\t\t}\r\n\t\tthis.props.onDeleteAsistente(id);\r\n\t}\r\n\r\n\thandleDeleteAppointment = (id) => this.props.onDeleteAppointment(id);\r\n\r\n\thandleEditAsistente = (id) => {\r\n\t\tconst asistente = this.props.asistentes.find(element => element.id === id);\r\n\t\tthis.setState({\r\n\t\t\tinputAsistente: asistente,\r\n\t\t\tinputAsistenteComponentIsOpened: true\r\n\t\t});\r\n\t}\r\n\r\n\thandleInputAsistenteClose = () => {\r\n\t\tthis.setState({\r\n\t\t\tinputAsistenteComponentIsOpened: false,\r\n\t\t\tinputAsistente: null\r\n\t\t});\r\n\t}\r\n\r\n\thandleSelectAsistente = (asistente) => this.setState({ selectedAsistente: asistente });\r\n\r\n\thandleSendSchedule = (id) => {\r\n\t\tconst asistente = this.props.asistentes.find(element => element.id === id);\r\n\t\tconst filteredAppointments = this.props.appointments.filter(appointment => appointment.asistentes.find(appointmentAsistente => appointmentAsistente.id === id));\r\n\t\tconst timezone = 'America/Mexico_City';\r\n\t\tlet localTimezone = 'America/Mexico_City';\r\n\t\tif (asistente.timezone) {\r\n\t\t\tlocalTimezone = asistente.timezone;\r\n\t\t}\r\n\t\tconst appointments = filteredAppointments.sort((a, b) => sortAlphabeticallyByDatetime(a, b));\r\n\t\tlet text = '';\r\n\t\tlet currentDate, currentTime;\r\n\t\tfor (const appointment of appointments) {\r\n\t\t\tif (appointment.datetime && appointment.ejecutivos && appointment.asistentes && appointment.duration) {\r\n\r\n\t\t\t\tconst currentDatetime = moment(appointment.datetime);\r\n\t\t\t\tconst date = moment.tz(currentDatetime.format('YYYY-MM-DDTHH:mm'), timezone);\r\n\t\t\t\tif (!currentDate || currentDate !== date.format('dddd DD MMMM')) {\r\n\t\t\t\t\tcurrentDate = date.format('dddd DD MMMM');\r\n\t\t\t\t\tcurrentTime = null;\r\n\t\t\t\t\ttext += currentDate.toUpperCase() + ': ';\r\n\t\t\t\t\tswitch (date.format('ddd')) {\r\n\t\t\t\t\t\tcase 'lun.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/85425291494';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'mar.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/88445795504';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'mié.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/86767091338';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'jue.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/87665492231';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'vie.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/88943327711';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'sáb.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/83792773099';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttext += '\\r\\n\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\tif (!currentTime || currentTime !== date.format('hh:mm A z (Z)')) {\r\n\t\t\t\t\tcurrentTime = date.format('hh:mm A z (Z)');\r\n\t\t\t\t\ttext += '    ' + date.tz(localTimezone).format('hh:mm A') + ' | ' + localTimezone;\r\n\t\t\t\t\ttext += '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\ttext += '\\r\\n';\r\n\t\t\t\tif (appointment.ejecutivos.length > 0) {\r\n\t\t\t\t\ttext += '        Ejecutivos: ' + appointment.ejecutivos.map(ejecutivo => ejecutivo.name).join(' | ') + '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\tif (appointment.asistentes.length > 0) {\r\n\t\t\t\t\ttext += '        Asistentes: ' + appointment.asistentes.map(asistente => asistente.name).join(' | ') + '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\ttext += '        Duración: 15min' + '\\r\\n\\r\\n';\r\n\t\t\t} else {\r\n\t\t\t\t//console.out('Error en ' + appointment);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst body = (<Box style={{ \"background-color\": \"white\" }}><textarea rows=\"30\" cols=\"100\">{text}</textarea></Box>);\r\n\t\tthis.setState({ modalBody: body, snackbarOpen: true });\r\n\t}\r\n\r\n\thandleSnackbarClose = () => this.setState({ snackbarOpen: false });\r\n\r\n\thandleSubmitAsistente = (asistente) => this.props.onSubmitAsistente(asistente);\r\n\r\n\trender() {\r\n\t\tconst { appointments, asistentes } = this.props;\r\n\t\tconst { modalBody, selectedAsistente, snackbarOpen } = this.state;\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<AsistenteInputComponent\r\n\t\t\t\t\topen={this.state.inputAsistenteComponentIsOpened}\r\n\t\t\t\t\tideatoonProjects={this.state.ideatoonProjects}\r\n\t\t\t\t\tasistente={this.state.inputAsistente}\r\n\t\t\t\t\tonClose={this.handleInputAsistenteClose}\r\n\t\t\t\t\tonSubmit={this.handleSubmitAsistente}\r\n\t\t\t\t/>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\topen={snackbarOpen}\r\n\t\t\t\t\tonClose={this.handleSnackbarClose}\r\n\t\t\t\t>\r\n\t\t\t\t\t{modalBody}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<Grid item sm={4} md={4}>\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\t\ttitle={`Asistentes (${asistentes.length})`}\r\n\t\t\t\t\t\t\taction={\r\n\t\t\t\t\t\t\t\t<IconButton edget=\"end\" onClick={this.handleClickAddAsistente}>\r\n\t\t\t\t\t\t\t\t\t<Add />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<Asistentes\r\n\t\t\t\t\t\t\t\tasistentes={asistentes}\r\n\t\t\t\t\t\t\t\tonDelete={this.handleDeleteAsistente}\r\n\t\t\t\t\t\t\t\tonEdit={this.handleEditAsistente}\r\n\t\t\t\t\t\t\t\tonSelect={this.handleSelectAsistente}\r\n\t\t\t\t\t\t\t\tonSendSchedule={this.handleSendSchedule}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item sm={8} md={8}>\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<CardHeader title=\"Calendario\" />\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<AppointmentsCalendar\r\n\t\t\t\t\t\t\t\tappointments={appointments}\r\n\t\t\t\t\t\t\t\tasistente={selectedAsistente}\r\n\t\t\t\t\t\t\t\tonDeleteAppointment={this.handleDeleteAppointment}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AsistentesPanel;","import React from 'react';\r\nimport { Avatar, IconButton, ListItem, ListItemAvatar, ListItemText, ListItemSecondaryAction, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { Gavel, MoreVert } from '@material-ui/icons'\r\nimport { FixedSizeList } from 'react-window';\r\n\r\nclass Ejecutivos extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tselectedEjecutivo: null\r\n\t\t}\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tthis.refs.list.forceUpdate();\r\n\t\treturn true;\r\n\t}\r\n\r\n\thandleItemDelete = (id) => {\r\n\t\tthis.props.onDelete(id);\r\n\t}\r\n\r\n\thandleItemEdit = (id) => {\r\n\t\tthis.props.onEdit(id);\r\n\t}\r\n\r\n\thandleItemSelect = (id) => {\r\n\t\tconst selectedEjecutivo = this.props.ejecutivos.find(ejecutivo => ejecutivo.id === id);\r\n\t\tthis.setState({ selectedEjecutivo: selectedEjecutivo });\r\n\t\tthis.props.onSelect(selectedEjecutivo);\r\n\t\tthis.refs.list.forceUpdate();\t\t\r\n\t}\r\n\r\n\thandleSendSchedule = (id) => {\r\n\t\tthis.props.onSendSchedule(id);\r\n\t}\r\n\r\n\trenderRow = (props) => {\r\n\t\tconst { index, style } = props;\r\n\t\tconst ejecutivo = this.props.ejecutivos[index];\r\n\t\tconst { selectedEjecutivo } = this.state;\r\n\t\treturn (\r\n\t\t\t<Ejecutivo\r\n\t\t\t\tkey={index}\r\n\t\t\t\tid={ejecutivo.id}\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tname={ejecutivo.name}\r\n\t\t\t\tdescription={`${ejecutivo.positionAtStudio} @ ${ejecutivo.studio}`}\r\n\t\t\t\ttimezone={ejecutivo.timezone}\r\n\t\t\t\tisJury={ejecutivo.isJury}\r\n\t\t\t\tisSelected={ejecutivo.id === selectedEjecutivo?.id}\r\n\t\t\t\tonDelete={this.handleItemDelete}\r\n\t\t\t\tonEdit={this.handleItemEdit}\r\n\t\t\t\tonSelect={this.handleItemSelect}\r\n\t\t\t\tonSendSchedule={this.handleSendSchedule}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { ejecutivos } = this.props;\r\n\t\treturn (\r\n\t\t\t<FixedSizeList\r\n\t\t\t\tref='list'\r\n\t\t\t\titemSize={80}\r\n\t\t\t\titemCount={ejecutivos.length}\r\n\t\t\t\theight={400}\r\n\t\t\t>\r\n\t\t\t\t{this.renderRow}\r\n\t\t\t</FixedSizeList>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass Ejecutivo extends React.PureComponent {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tanchorEl: null\r\n\t\t}\r\n\t}\r\n\r\n\thandleItemClick = () => {\r\n\t\tthis.props.onSelect(this.props.id);\r\n\t}\r\n\r\n\thandleItemEdit = () => {\r\n\t\tthis.props.onEdit(this.props.id);\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\thandleItemDelete = () => {\r\n\t\tthis.props.onDelete(this.props.id);\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\thandleMenuOpen = (event) => {\r\n\t\tthis.setState({ anchorEl: event.currentTarget });\r\n\t}\r\n\r\n\thandleMenuClose = () => {\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\thandleSendSchedule = () => {\r\n\t\tthis.props.onSendSchedule(this.props.id);\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ListItem\r\n\t\t\t\tbutton\r\n\t\t\t\tdense\r\n\t\t\t\tselected={this.props.isSelected}\r\n\t\t\t\tContainerProps={{ style: this.props.style }}\r\n\t\t\t\tContainerComponent=\"div\"\r\n\t\t\t\tonClick={this.handleItemClick}\r\n\t\t\t>\r\n\t\t\t\t{this.props.isJury\r\n\t\t\t\t\t? <ListItemAvatar><Avatar><Gavel /></Avatar></ListItemAvatar>\r\n\t\t\t\t\t: <ListItemAvatar><Avatar alt={this.props.name} /></ListItemAvatar>}\r\n\t\t\t\t<ListItemText primary={this.props.name} secondary={\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<Typography variant=\"body2\" noWrap>{this.props.description}</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body2\" noWrap>{this.props.timezone ?? 'No timezone'}</Typography>\t\t\t\t\t\t\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t} />\r\n\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t<IconButton edge=\"end\" onClick={this.handleMenuOpen}>\r\n\t\t\t\t\t\t<MoreVert />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<Menu anchorEl={this.state.anchorEl} open={Boolean(this.state.anchorEl)} onClose={this.handleMenuClose}>\r\n\t\t\t\t\t\t<MenuItem onClick={this.handleItemEdit}>Editar</MenuItem>\r\n\t\t\t\t\t\t<MenuItem onClick={this.handleItemDelete}>Eliminar</MenuItem>\r\n\t\t\t\t\t\t<MenuItem onClick={this.handleSendSchedule}>Enviar Agenda</MenuItem>\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Ejecutivos;","import React from 'react';\r\nimport { Button, Checkbox, Dialog, DialogActions, DialogContent, DialogTitle, FormControl, FormControlLabel, FormGroup, FormLabel, TextField } from '@material-ui/core';\r\nimport moment from 'moment-timezone';\r\nimport 'moment/locale/es';\r\n\r\nclass EjecutivoInputComponent extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tmoment.locale('es');\r\n\t\tthis.state = EjecutivoInputComponent.stateFromProps(props);\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n\t\tif (props.open === true && state.open === false) {\r\n\t\t\treturn EjecutivoInputComponent.stateFromProps(props);\r\n\t\t} else {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic stateFromProps = function (props) {\r\n\t\tconst ejecutivo = props.ejecutivo;\r\n\t\treturn {\r\n\t\t\topen: props.open || false,\r\n\t\t\tid: ejecutivo?.id || null,\r\n\t\t\tname: ejecutivo?.name || '',\r\n\t\t\tpositionAtStudio: ejecutivo?.positionAtStudio || '',\r\n\t\t\tstudio: ejecutivo?.studio || '',\r\n\t\t\tisJury: ejecutivo?.isJury || false,\r\n\t\t\tcgi: ejecutivo?.cgi || false,\r\n\t\t\tlatamTopArtistsAndFreelanceTalent: ejecutivo?.latamTopArtistsAndFreelanceTalent || false,\r\n\t\t\tnewIPs: ejecutivo?.newIPs || false,\r\n\t\t\tnewIdeas: ejecutivo?.newIdeas || false,\r\n\t\t\tstopMotion: ejecutivo?.stopMotion || false,\r\n\t\t\ttargetPreschool: ejecutivo?.targetPreschool || false,\r\n\t\t\ttargetKids: ejecutivo?.targetKids || false,\r\n\t\t\ttargetPrime: ejecutivo?.targetPrime || false,\r\n\t\t\ttargetAdult: ejecutivo?.targetAdult || false,\r\n\t\t\ttimezone: ejecutivo?.timezone || 'America/Mexico_City',\r\n\t\t\ttwoD: ejecutivo?.twoD || false,\r\n\t\t\tthreeD: ejecutivo?.threeD || false,\r\n\t\t\ttopStudios: ejecutivo?.topStudios || false,\r\n\t\t\tvideogames: ejecutivo?.videogames || false\r\n\t\t};\r\n\t}\r\n\r\n\thandleCancel = () => {\r\n\t\tthis.setState({ open: false });\r\n\t\tthis.props.onClose();\r\n\t};\r\n\r\n\thandleCheckedChange = (event) => {\r\n\t\tthis.setState({ [event.target.name]: event.target.checked });\r\n\t}\r\n\r\n\thandleFormSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tthis.props.onSubmit({\r\n\t\t\tid: this.state.id,\r\n\t\t\tname: this.state.name.trim(),\r\n\t\t\tpositionAtStudio: this.state.positionAtStudio.trim(),\r\n\t\t\tstudio: this.state.studio.trim(),\r\n\t\t\tisJury: this.state.isJury,\r\n\t\t\tcgi: this.state.cgi,\r\n\t\t\tlatamTopArtistsAndFreelanceTalent: this.state.latamTopArtistsAndFreelanceTalent,\r\n\t\t\tnewIPs: this.state.newIPs,\r\n\t\t\tnewIdeas: this.state.newIdeas,\r\n\t\t\tstopMotion: this.state.stopMotion,\r\n\t\t\ttargetPreschool: this.state.targetPreschool,\r\n\t\t\ttargetKids: this.state.targetKids,\r\n\t\t\ttargetPrime: this.state.targetPrime,\r\n\t\t\ttargetAdult: this.state.targetAdult,\r\n\t\t\ttopStudios: this.state.topStudios,\r\n\t\t\ttimezone: this.state.timezone || 'America/Mexico_City',\r\n\t\t\ttwoD: this.state.twoD,\r\n\t\t\tthreeD: this.state.threeD,\r\n\t\t\tvideogames: this.state.videogames\r\n\t\t});\r\n\t\tthis.setState({ open: false });\r\n\t\tthis.props.onClose();\r\n\t}\r\n\r\n\thandleValueChange = (event) => {\r\n\t\tthis.setState({ [event.target.name]: event.target.value });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { name, positionAtStudio, studio, isJury, topStudios, cgi, latamTopArtistsAndFreelanceTalent, newIPs, newIdeas, stopMotion, targetPreschool, targetKids, targetPrime, targetAdult, twoD, threeD, videogames } = this.state;\r\n\t\treturn (\r\n\t\t\t<Dialog disableBackdropClick={true} open={this.state.open} onClose={this.handleCancel}>\r\n\t\t\t\t<form onSubmit={this.handleFormSubmit}>\r\n\t\t\t\t\t<DialogTitle>Ejecutivo</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<TextField autoFocus fullWidth={true} label=\"Name\" margin=\"dense\" name=\"name\" required type=\"text\" value={name}\r\n\t\t\t\t\t\t\tonChange={(event) => this.handleValueChange(event)} />\r\n\t\t\t\t\t\t<TextField fullWidth={true} label=\"Position at studio\" margin=\"dense\" name=\"positionAtStudio\" required type=\"text\" value={positionAtStudio}\r\n\t\t\t\t\t\t\tonChange={this.handleValueChange} />\r\n\t\t\t\t\t\t<TextField fullWidth={true} label=\"Studio name\" margin=\"dense\" name=\"studio\" type=\"text\" value={studio}\r\n\t\t\t\t\t\t\tonChange={this.handleValueChange} />\r\n\t\t\t\t\t\t<FormControlLabel label=\"Is Jury?\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={isJury} onChange={this.handleCheckedChange} name=\"isJury\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"2D\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={twoD} onChange={this.handleCheckedChange} name=\"twoD\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"3D\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={threeD} onChange={this.handleCheckedChange} name=\"threeD\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"Videogames\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={videogames} onChange={this.handleCheckedChange} name=\"videogames\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"Stop Motion\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={stopMotion} onChange={this.handleCheckedChange} name=\"stopMotion\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControlLabel label=\"CGI\"\r\n\t\t\t\t\t\t\tcontrol={<Checkbox checked={cgi} onChange={this.handleCheckedChange} name=\"cgi\" />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<FormControl component=\"fieldset\" margin=\"dense\" fullWidth={true}>\r\n\t\t\t\t\t\t\t<FormLabel component=\"legend\">Target</FormLabel>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Preschool (4-7)\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={targetPreschool} onChange={this.handleCheckedChange} name=\"targetPreschool\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Kids (8-12)\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={targetKids} onChange={this.handleCheckedChange} name=\"targetKids\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Prime time\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={targetPrime} onChange={this.handleCheckedChange} name=\"targetPrime\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Adult\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={targetAdult} onChange={this.handleCheckedChange} name=\"targetAdult\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<FormControl component=\"fieldset\" margin=\"dense\" fullWidth={true}>\r\n\t\t\t\t\t\t\t<FormLabel component=\"legend\">Interests in the market</FormLabel>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Meet with studios that provide services or work-from-hire\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={topStudios} onChange={this.handleCheckedChange} name=\"topStudios\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Meet with latam top artists & freelance talent\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={latamTopArtistsAndFreelanceTalent} onChange={this.handleCheckedChange} name=\"latamTopArtistsAndFreelanceTalent\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Find new IPs in development\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={newIPs} onChange={this.handleCheckedChange} name=\"newIPs\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<FormControlLabel label=\"Discover talent: Rising and 'under the radar' studios\"\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={newIdeas} onChange={this.handleCheckedChange} name=\"newIdeas\" />}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.handleCancel}>Cancelar</Button>\r\n\t\t\t\t\t\t<Button type=\"submit\" color=\"primary\">Aceptar</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</form>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { EjecutivoInputComponent };","import React from 'react';\r\nimport { Box, Button, ButtonGroup, Card, CardContent, CardHeader, Grid, IconButton, Modal } from '@material-ui/core';\r\nimport { Add } from '@material-ui/icons'\r\nimport moment from 'moment-timezone';\r\nimport 'moment/locale/es';\r\nimport Ejecutivos from './Ejecutivos'\r\nimport { EjecutivoInputComponent } from './EjecutivoInputComponent'\r\nimport { AppointmentsCalendar } from './AppointmentsCalendar'\r\nimport { sortAlphabeticallyByDatetime } from './Utils'\r\n\r\nclass EjecutivosPanel extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinputEjecutivo: null,\r\n\t\t\tinputEjecutivoComponentIsOpened: false,\r\n\t\t\tselectedEjecutivo: null, \r\n\t\t\tmodalBody: '',\t\t\t\r\n\t\t\tsnackbarOpen: false\r\n\t\t}\r\n\t\tmoment.locale('es');\r\n\t}\r\n\r\n\thandleClickAddEjecutivo = () => this.setState({ inputEjecutivoComponentIsOpened: true });\r\n\r\n\thandleClickImport = () => {\r\n\t\t/*for (let i = 0; i < 100; i++) {\r\n\t\t\tconst ejecutivo = {\r\n\t\t\t\tid: uuid(),\r\n\t\t\t\tname: `Ejecutivo ${i + 1}`,\r\n\t\t\t\tpositionAtStudio: `Position ${i + 1}`,\r\n\t\t\t\temail: `${i + 1}@mail.com`\r\n\t\t\t};\r\n\t\t\tstoreEjecutivo(ejecutivo);\r\n\t\t}\r\n\t\tfor (let i = 0; i < 100; i++) {\r\n\t\t\tconst asistente = {\r\n\t\t\t\tid: uuid(),\r\n\t\t\t\tname: `Asistente ${i + 1}`,\r\n\t\t\t\temail: `${i + 1}@mail.com`,\r\n\t\t\t\tstudio: `Estudio ${i + 1}`\r\n\t\t\t};\r\n\t\t\tstoreAsistente(asistente);\r\n\t\t}*/\r\n\t}\r\n\r\n\thandleClickExport = () => {\r\n\t\tlet csvContent = \"data:text/csv;charset=utf-8,\";\r\n\t\tconst headerRow = 'NAME,POSITION AT THE STUDIO,STUDIO NAME,Meet with with top studios,Meet with the latam rising studios,Meet with latam top artists & freelance talent,Find new IPs in development,Find new ideas that could become an IP';\r\n\t\tcsvContent += headerRow + '\\r\\n';\r\n\t\tthis.props.ejecutivos.forEach(ejecutivo => {\r\n\t\t\tconst csvRow = `\"${ejecutivo.name}\",\"${ejecutivo.positionAtStudio}\",\"${ejecutivo.studio}\",\"${ejecutivo.topStudios ? 'X' : ''}\",\"${ejecutivo.latamRisingStudios ? 'X' : ''}\",\"${ejecutivo.latamTopArtistsAndFreelanceTalent ? 'X' : ''}\",\"${ejecutivo.newIPs ? 'X' : ''}\",\"${ejecutivo.newIdeas ? 'X' : ''}\"`;\r\n\t\t\tcsvContent += csvRow + '\\r\\n';\r\n\t\t});\r\n\t\tconst encodedUri = encodeURI(csvContent);\r\n\t\twindow.open(encodedUri);\r\n\t}\r\n\r\n\thandleDeleteEjecutivo = (id) => {\r\n\t\tif (this.state.selectedEjecutivo?.id === id) {\r\n\t\t\tthis.setState({ selectedEjecutivo: null });\r\n\t\t}\r\n\t\tthis.props.onDeleteEjecutivo(id);\r\n\t}\r\n\r\n\thandleEditEjecutivo = (id) => {\r\n\t\tconst ejecutivo = this.props.ejecutivos.find(element => element.id === id);\r\n\t\tthis.setState({\r\n\t\t\tinputEjecutivo: ejecutivo,\r\n\t\t\tinputEjecutivoComponentIsOpened: true\r\n\t\t});\r\n\t}\r\n\r\n\thandleInputEjecutivoClose = () => {\r\n\t\tthis.setState({\r\n\t\t\tinputEjecutivoComponentIsOpened: false,\r\n\t\t\tinputEjecutivo: null\r\n\t\t});\r\n\t}\r\n\r\n\thandleSelectEjecutivo = (ejecutivo) => this.setState({ selectedEjecutivo: ejecutivo });\t\r\n\r\n\thandleSendSchedule = (id) => {\r\n\t\tconst ejecutivo = this.props.ejecutivos.find(element => element.id === id);\r\n\t\tconst filteredAppointments = this.props.appointments.filter(appointment => appointment.ejecutivos.find(appointmentEjecutivo => appointmentEjecutivo.id === ejecutivo.id));\r\n\t\tconst timezone = 'America/Mexico_City';\r\n\t\tlet localTimezone = 'America/Mexico_City';\r\n\t\tif (ejecutivo.timezone) {\r\n\t\t\tlocalTimezone = ejecutivo.timezone;\r\n\t\t}\r\n\t\tconst appointments = filteredAppointments.sort((a, b) => sortAlphabeticallyByDatetime(a, b));\r\n\t\tlet text = '';\r\n\t\tlet currentDate, currentTime;\r\n\t\tfor (const appointment of appointments) {\r\n\t\t\tif (appointment.datetime && appointment.ejecutivos && appointment.asistentes && appointment.duration) {\r\n\r\n\t\t\t\tconst currentDatetime = moment(appointment.datetime);\r\n\t\t\t\tconst date = moment.tz(currentDatetime.format('YYYY-MM-DDTHH:mm'), timezone);\r\n\t\t\t\tif (!currentDate || currentDate !== date.format('dddd DD MMMM')) {\r\n\t\t\t\t\tcurrentDate = date.format('dddd DD MMMM');\r\n\t\t\t\t\tcurrentTime = null;\r\n\t\t\t\t\ttext += currentDate.toUpperCase() + ': ';\r\n\t\t\t\t\tswitch(date.format('ddd')) {\r\n\t\t\t\t\t\tcase 'lun.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/85425291494';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'mar.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/88445795504';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'mié.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/86767091338';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'jue.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/87665492231';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'vie.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/88943327711';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'sáb.':\r\n\t\t\t\t\t\t\ttext += 'https://us02web.zoom.us/j/83792773099';\r\n\t\t\t\t\t\t\tbreak;\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttext += '\\r\\n\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\tif (!currentTime || currentTime !== date.format('hh:mm A z (Z)')) {\r\n\t\t\t\t\tcurrentTime = date.format('hh:mm A z (Z)');\r\n\t\t\t\t\ttext += '    ' + date.tz(localTimezone).format('hh:mm A') + ' | ' + localTimezone;\r\n\t\t\t\t\ttext += '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\ttext += '\\r\\n';\r\n\t\t\t\tif (appointment.ejecutivos.length > 0) {\r\n\t\t\t\t\ttext += '        Ejecutivos: ' + appointment.ejecutivos.map(ejecutivo => ejecutivo.name).join(' | ') + '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\tif (appointment.asistentes.length > 0) {\r\n\t\t\t\t\ttext += '        Asistentes: ' + appointment.asistentes.map(asistente => asistente.name).join(' | ') + '\\r\\n';\r\n\t\t\t\t}\r\n\t\t\t\ttext += '        Duración: 15min' + '\\r\\n\\r\\n';\r\n\t\t\t} else {\r\n\t\t\t\t//console.out('Error en ' + appointment);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst body = (<Box style={{ \"background-color\": \"white\" }}><textarea rows=\"30\" cols=\"100\">{text}</textarea></Box>);\r\n\t\tthis.setState({ modalBody: body, snackbarOpen: true });\r\n\t}\r\n\r\n\thandleSnackbarClose = () => this.setState({ snackbarOpen: false });\r\n\r\n\thandleSubmitAvailability = availability => this.props.onSubmitAvailability(availability);\r\n\r\n\thandleSubmitEjecutivo = ejecutivo => this.props.onSubmitEjecutivo(ejecutivo);\t\r\n\r\n\trender() {\r\n\t\tconst { appointments, ejecutivos } = this.props;\r\n\t\tconst { inputEjecutivo, inputEjecutivoComponentIsOpened, modalBody, selectedEjecutivo, snackbarOpen } = this.state;\r\n\t\treturn (\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<EjecutivoInputComponent\r\n\t\t\t\t\topen={inputEjecutivoComponentIsOpened}\r\n\t\t\t\t\tejecutivo={inputEjecutivo}\r\n\t\t\t\t\tonClose={this.handleInputEjecutivoClose}\r\n\t\t\t\t\tonSubmit={this.handleSubmitEjecutivo}\r\n\t\t\t\t/>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\topen={snackbarOpen}\r\n\t\t\t\t\tonClose={this.handleSnackbarClose}\r\n\t\t\t\t>\r\n\t\t\t\t\t{modalBody}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<Grid item sm={4} md={4}>\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\t\ttitle={`Ejecutivos (${ejecutivos.length})`}\r\n\t\t\t\t\t\t\taction={\r\n\t\t\t\t\t\t\t\t<IconButton edget=\"end\" onClick={this.handleClickAddEjecutivo}>\r\n\t\t\t\t\t\t\t\t\t<Add />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<Ejecutivos\r\n\t\t\t\t\t\t\t\tejecutivos={ejecutivos}\r\n\t\t\t\t\t\t\t\tonDelete={this.handleDeleteEjecutivo}\r\n\t\t\t\t\t\t\t\tonEdit={this.handleEditEjecutivo}\r\n\t\t\t\t\t\t\t\tonSelect={this.handleSelectEjecutivo}\r\n\t\t\t\t\t\t\t\tonSendSchedule={this.handleSendSchedule}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tdisplay=\"flex\"\r\n\t\t\t\t\t\tjustifyContent=\"flex-end\"\r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tstyle={{ \"margin-top\": \"5px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ButtonGroup variant=\"text\">\r\n\t\t\t\t\t\t\t{ false && <Button onClick={this.handleClickImport}>Importar</Button> }\r\n\t\t\t\t\t\t\t<Button onClick={this.handleClickExport}>Exportar</Button>\r\n\t\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item sm={8} md={8}>\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<CardHeader title=\"Calendario\" />\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<AppointmentsCalendar\r\n\t\t\t\t\t\t\t\tappointments={appointments}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tejecutivo={selectedEjecutivo}\r\n\t\t\t\t\t\t\t\tonSubmitAvailability={this.handleSubmitAvailability}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EjecutivosPanel;","import { openDB } from 'idb';\r\n\r\nasync function getOpenDb() {\r\n\tconst db = await openDB('pixelatl', 1, {\r\n\t\tupgrade(db) {\r\n\t\t\tif (db.objectStoreNames.contains('asistentes') === false) {\r\n\t\t\t\tdb.createObjectStore('asistentes', { keyPath: 'id' });\r\n\t\t\t}\r\n\t\t\tif (db.objectStoreNames.contains('ejecutivos') === false) {\r\n\t\t\t\tdb.createObjectStore('ejecutivos', { keyPath: 'id' });\r\n\t\t\t}\r\n\t\t\tif (db.objectStoreNames.contains('availability') === false) {\r\n\t\t\t\tdb.createObjectStore('availability', { keyPath: 'id' });\r\n\t\t\t}\r\n\t\t\tif (db.objectStoreNames.contains('appointments') === false) {\r\n\t\t\t\tdb.createObjectStore('appointments', { keyPath: 'id' });\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\treturn db;\r\n}\r\n\r\nasync function deleteAppointment(id) {\r\n\tconst db = await getOpenDb();\r\n\tawait db.delete('appointments', id);\r\n}\r\n\r\nasync function deleteAsistente(id) {\r\n\tconst db = await getOpenDb();\r\n\tawait db.delete('asistentes', id);\r\n}\r\n\r\nasync function deleteEjecutivo(id) {\r\n\tconst db = await getOpenDb();\r\n\tawait db.delete('ejecutivos', id);\r\n\tawait db.delete('availability', id);\r\n}\r\n\r\nasync function getAppointments() {\r\n\tconst db = await getOpenDb();\r\n\treturn await db.getAll('appointments');\r\n}\r\n\r\nasync function getAvailability() {\r\n\tconst db = await getOpenDb();\r\n\treturn await db.getAll('availability');\r\n}\r\n\r\nasync function getAsistentes() {\r\n\tconst db = await getOpenDb();\r\n\treturn await db.getAll('asistentes');\r\n}\r\n\r\nasync function getEjecutivos() {\r\n\tconst db = await getOpenDb();\r\n\treturn await db.getAll('ejecutivos');\r\n}\r\n\r\nasync function storeAsistente(asistente) {\r\n\tconst db = await getOpenDb();\r\n\tawait db.put('asistentes', asistente);\r\n}\r\n\r\nasync function storeAppointment(appointment) {\r\n\tconst db = await getOpenDb();\r\n\tawait db.put('appointments', appointment);\r\n}\r\n\r\nasync function storeAvailability(availability) {\r\n\tconst db = await getOpenDb();\r\n\tawait db.put('availability', availability);\r\n}\r\n\r\nasync function storeEjecutivo(ejecutivo) {\r\n\tconst db = await getOpenDb();\r\n\tawait db.put('ejecutivos', ejecutivo);\r\n}\r\n\r\nasync function cleanAppointments() {\r\n\tconst db = await getOpenDb();\r\n\tconst store = db.transaction('appointments', 'readwrite').store;\r\n\tlet cursor = await store.openCursor();\r\n\twhile (cursor) {\r\n\t\tconsole.log(cursor.key, cursor.value);\r\n\t\tconst appointment = cursor.value;\r\n\t\tconst asistentes = appointment.asistentes;\r\n\t\tconst ejecutivos = appointment.ejecutivos;\r\n\t\tif (asistentes) {\r\n\t\t\tfor (const asistente of asistentes) {\r\n\t\t\t\tif (asistente.appointments) {\r\n\t\t\t\t\tdelete asistente.appointments;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (ejecutivos) {\r\n\t\t\tfor (const ejecutivo of ejecutivos) {\r\n\t\t\t\tif (ejecutivo.appointments) {\r\n\t\t\t\t\tdelete ejecutivo.appointments;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tawait store.put(appointment);\r\n\t\tcursor = await cursor.continue();\r\n\t}\r\n}\r\n\r\nexport { cleanAppointments }\r\nexport { deleteAppointment, getAppointments, storeAppointment }\r\nexport { getAvailability, storeAvailability }\r\nexport { deleteEjecutivo, getEjecutivos, storeEjecutivo };\r\nexport { deleteAsistente, getAsistentes, storeAsistente };","import React from 'react';\nimport { AppBar, Box, Container, Paper, Tabs, Tab, Toolbar, Typography } from '@material-ui/core';\nimport { v4 as uuid } from 'uuid';\nimport AppointmentsPanel from './AppointmentsPanel'\nimport AsistentesPanel from './AsistentesPanel'\nimport EjecutivosPanel from './EjecutivosPanel'\nimport { getAvailability, getAppointments, getAsistentes, getEjecutivos } from './Repository';\nimport { deleteEjecutivo, storeEjecutivo } from './Repository'\nimport { deleteAsistente, storeAsistente } from './Repository'\nimport { cleanAppointments, deleteAppointment, storeAppointment } from './Repository'\nimport { storeAvailability } from './Repository'\nimport { sortAlphabeticallyByName } from './Utils'\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tappointments: [],\n\t\t\tasistentes: [],\n\t\t\tejecutivos: [],\n\t\t\ttabValue: 0\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\n\t\t//cleanAppointments();\n\n\t\tconst promises = [];\n\t\tpromises.push(getAppointments());\n\t\tpromises.push(getAsistentes());\n\t\tpromises.push(getAvailability());\n\t\tpromises.push(getEjecutivos());\n\t\tPromise.all(promises).then(values => {\n\n\t\t\tconst appointments = values[0];\n\t\t\tconst asistentes = values[1];\n\t\t\tconst availability = values[2];\n\t\t\tconst ejecutivos = values[3];\n\n\t\t\tasistentes.sort((a, b) => sortAlphabeticallyByName(a, b));\n\t\t\tejecutivos.sort((a, b) => sortAlphabeticallyByName(a, b));\n\n\t\t\tfor (const ejecutivo of ejecutivos) {\t\t\t\t\n\t\t\t\tconst ejecutivoAvailability = availability.find(availability =>\n\t\t\t\t\tavailability.id === ejecutivo.id\n\t\t\t\t);\n\t\t\t\tejecutivo.availability = ejecutivoAvailability ?? [];\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tappointments: appointments,\n\t\t\t\tasistentes: asistentes,\n\t\t\t\tejecutivos: ejecutivos\n\t\t\t});\n\t\t});\n\t}\n\n\thandleDeleteAppointment = (id) => {\n\t\tdeleteAppointment(id).then(() => {\n\t\t\tconst appointments = this.state.appointments.filter(appointment => appointment.id !== id);\n\t\t\tthis.setState({ appointments: appointments });\n\t\t});\n\t}\n\n\thandleDeleteAsistente = (id) => {\n\t\tdeleteAsistente(id).then(() => {\n\t\t\tconst asistentes = this.state.asistentes.filter(element => element.id !== id);\n\t\t\tthis.setState({ asistentes: asistentes });\n\t\t});\n\t}\n\n\thandleDeleteEjecutivo = (id) => {\n\t\tdeleteEjecutivo(id).then(() => {\n\t\t\tconst ejecutivos = this.state.ejecutivos.filter(element => element.id !== id);\n\t\t\tthis.setState({ ejecutivos: ejecutivos });\n\t\t});\n\t}\n\n\thandleSubmitAsistente = (asistente) => {\n\t\tlet newAsistente = false;\n\t\tif (!asistente.id) {\n\t\t\tasistente.id = uuid();\n\t\t\tnewAsistente = true;\n\t\t}\n\t\tlet asistentes = this.state.asistentes;\n\t\tstoreAsistente(asistente).then(() => {\n\t\t\tif (newAsistente === false) {\n\t\t\t\tasistentes = asistentes.filter(element => element.id !== asistente.id);\n\t\t\t}\n\t\t\tasistentes.push(asistente);\n\t\t\tasistentes.sort((a, b) => sortAlphabeticallyByName(a, b));\n\t\t\tthis.setState({ asistentes: asistentes });\n\t\t});\n\t}\n\n\thandleSubmitAvailability = (availability) => {\n\t\tstoreAvailability(availability).then(() => {\n\t\t\tconst ejecutivo = this.state.ejecutivos.find(element => element.id === availability.id);\n\t\t\tejecutivo.availability = availability;\n\t\t\tthis.setState({ ejecutivos: this.state.ejecutivos });\n\t\t});\n\t}\n\n\thandleSubmitAppointment = (appointment) => {\n\t\tlet newAppointment = false;\n\t\tif (!appointment.id) {\n\t\t\tappointment.id = uuid();\n\t\t\tnewAppointment = true;\n\t\t}\n\t\tlet appointments = this.state.appointments;\n\t\tstoreAppointment(appointment).then(() => {\n\t\t\tif (newAppointment === false) {\n\t\t\t\tappointments = appointments.filter(element => element.id !== appointment.id);\n\t\t\t}\n\t\t\tappointments.push(appointment);\n\t\t\tthis.setState({ appointments: appointments });\n\t\t});\n\t}\n\n\thandleSubmitEjecutivo = (ejecutivo) => {\n\t\tlet newEjecutivo = false;\n\t\tif (!ejecutivo.id) {\n\t\t\tejecutivo.id = uuid();\n\t\t\tnewEjecutivo = true;\n\t\t\tejecutivo.availability = [];\n\t\t}\n\t\tlet ejecutivos = this.state.ejecutivos;\n\t\tstoreEjecutivo(ejecutivo).then(() => {\n\t\t\tif (newEjecutivo === false) {\n\t\t\t\tejecutivos = ejecutivos.filter(element => element.id !== ejecutivo.id);\n\t\t\t}\t\t\t\n\t\t\tejecutivos.push(ejecutivo);\n\t\t\tejecutivos.sort((a, b) => sortAlphabeticallyByName(a, b));\n\t\t\tthis.setState({ ejecutivos: ejecutivos });\n\t\t});\n\t}\n\n\thandleTabChange = (_event, newValue) => {\n\t\tthis.setState({ tabValue: newValue });\n\t}\n\n\trender() {\n\t\tconst { appointments, asistentes, ejecutivos, tabValue } = this.state;\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<AppBar position=\"static\">\n\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t<Typography variant=\"h6\">Pixelatl - Mercado</Typography>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t\t<Container disableGutters={true} maxWidth={false}>\n\t\t\t\t\t<Paper style={{ marginBottom: 10 }}>\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\tvalue={tabValue}\n\t\t\t\t\t\t\tonChange={this.handleTabChange}\n\t\t\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\t\t\ttextColor=\"primary\"\n\t\t\t\t\t\t\tcentered\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tab label=\"EJECUTIVOS\" />\n\t\t\t\t\t\t\t<Tab label=\"ASISTENTES\" />\n\t\t\t\t\t\t\t<Tab label=\"CITAS\" />\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t<TabPanel value={tabValue} index={0}>\n\t\t\t\t\t\t<EjecutivosPanel\n\t\t\t\t\t\t\tappointments={appointments}\n\t\t\t\t\t\t\tejecutivos={ejecutivos}\n\t\t\t\t\t\t\tonDeleteEjecutivo={this.handleDeleteEjecutivo}\n\t\t\t\t\t\t\tonSubmitAvailability={this.handleSubmitAvailability}\n\t\t\t\t\t\t\tonSubmitEjecutivo={this.handleSubmitEjecutivo}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TabPanel>\n\t\t\t\t\t<TabPanel value={tabValue} index={1}>\n\t\t\t\t\t\t<AsistentesPanel\n\t\t\t\t\t\t\tasistentes={asistentes}\n\t\t\t\t\t\t\tappointments={appointments}\n\t\t\t\t\t\t\tonDeleteAppointment={this.handleDeleteAppointment}\n\t\t\t\t\t\t\tonDeleteAsistente={this.handleDeleteAsistente}\n\t\t\t\t\t\t\tonSubmitAsistente={this.handleSubmitAsistente}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TabPanel>\n\t\t\t\t\t<TabPanel value={tabValue} index={2}>\n\t\t\t\t\t\t<AppointmentsPanel\n\t\t\t\t\t\t\tappointments={appointments}\n\t\t\t\t\t\t\tasistentes={asistentes}\n\t\t\t\t\t\t\tejecutivos={ejecutivos}\n\t\t\t\t\t\t\tonDeleteAppointment={this.handleDeleteAppointment}\n\t\t\t\t\t\t\tonSubmitAppointment={this.handleSubmitAppointment}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TabPanel>\n\t\t\t\t</Container>\n\t\t\t</Box>\n\t\t)\n\t}\n}\n\nfunction TabPanel(props) {\n\tconst { children, value, index, ...other } = props;\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`full-width-tabpanel-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && (\n\t\t\t\t<Box>\n\t\t\t\t\t{children}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.querySelector('#root'),\r\n);"],"sourceRoot":""}